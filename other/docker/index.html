<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>9.1 Docker概述 | jaqi.note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/jaqi.note/logo.jpg">
    <script>
                var _hmt = _hmt || [];
                (function() {
                    var hm = document.createElement("script");
                    hm.src = "https://hm.baidu.com/hm.js?b7303024b1d1000570507a8af21071bd";
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(hm, s);
                })();
           </script>
    <meta name="description" content="字典，是惟一把成功放在工作之前的地方！">
    
    <link rel="preload" href="/jaqi.note/assets/css/0.styles.115dbdb9.css" as="style"><link rel="preload" href="/jaqi.note/assets/js/app.2feb56e4.js" as="script"><link rel="preload" href="/jaqi.note/assets/js/2.cf0a2c66.js" as="script"><link rel="preload" href="/jaqi.note/assets/js/74.8606f137.js" as="script"><link rel="prefetch" href="/jaqi.note/assets/js/10.bbb7f5b9.js"><link rel="prefetch" href="/jaqi.note/assets/js/11.0777787e.js"><link rel="prefetch" href="/jaqi.note/assets/js/12.324b68a8.js"><link rel="prefetch" href="/jaqi.note/assets/js/13.25969066.js"><link rel="prefetch" href="/jaqi.note/assets/js/14.24634d09.js"><link rel="prefetch" href="/jaqi.note/assets/js/15.2f709246.js"><link rel="prefetch" href="/jaqi.note/assets/js/16.2d513b30.js"><link rel="prefetch" href="/jaqi.note/assets/js/17.0b7190b8.js"><link rel="prefetch" href="/jaqi.note/assets/js/18.5ee79291.js"><link rel="prefetch" href="/jaqi.note/assets/js/19.13863cb8.js"><link rel="prefetch" href="/jaqi.note/assets/js/20.af731f74.js"><link rel="prefetch" href="/jaqi.note/assets/js/21.486a10a5.js"><link rel="prefetch" href="/jaqi.note/assets/js/22.99b8fe60.js"><link rel="prefetch" href="/jaqi.note/assets/js/23.d9f1d02b.js"><link rel="prefetch" href="/jaqi.note/assets/js/24.0ce77f67.js"><link rel="prefetch" href="/jaqi.note/assets/js/25.d2874685.js"><link rel="prefetch" href="/jaqi.note/assets/js/26.6b1a7a12.js"><link rel="prefetch" href="/jaqi.note/assets/js/27.5205440e.js"><link rel="prefetch" href="/jaqi.note/assets/js/28.4a0ecf0b.js"><link rel="prefetch" href="/jaqi.note/assets/js/29.75f81631.js"><link rel="prefetch" href="/jaqi.note/assets/js/3.b1112b9c.js"><link rel="prefetch" href="/jaqi.note/assets/js/30.9f4eb4b3.js"><link rel="prefetch" href="/jaqi.note/assets/js/31.b5f463e4.js"><link rel="prefetch" href="/jaqi.note/assets/js/32.bff16e8e.js"><link rel="prefetch" href="/jaqi.note/assets/js/33.f4259706.js"><link rel="prefetch" href="/jaqi.note/assets/js/34.fdf7e104.js"><link rel="prefetch" href="/jaqi.note/assets/js/35.06d12526.js"><link rel="prefetch" href="/jaqi.note/assets/js/36.69d33875.js"><link rel="prefetch" href="/jaqi.note/assets/js/37.dc856357.js"><link rel="prefetch" href="/jaqi.note/assets/js/38.401a813c.js"><link rel="prefetch" href="/jaqi.note/assets/js/39.e16351b2.js"><link rel="prefetch" href="/jaqi.note/assets/js/4.cc27441e.js"><link rel="prefetch" href="/jaqi.note/assets/js/40.747bfc8f.js"><link rel="prefetch" href="/jaqi.note/assets/js/41.f81f1388.js"><link rel="prefetch" href="/jaqi.note/assets/js/42.8b53911f.js"><link rel="prefetch" href="/jaqi.note/assets/js/43.2e34dffd.js"><link rel="prefetch" href="/jaqi.note/assets/js/44.774b02bc.js"><link rel="prefetch" href="/jaqi.note/assets/js/45.263144fc.js"><link rel="prefetch" href="/jaqi.note/assets/js/46.06a4bb65.js"><link rel="prefetch" href="/jaqi.note/assets/js/47.56662806.js"><link rel="prefetch" href="/jaqi.note/assets/js/48.4f786d3a.js"><link rel="prefetch" href="/jaqi.note/assets/js/49.630b68a6.js"><link rel="prefetch" href="/jaqi.note/assets/js/5.573cc974.js"><link rel="prefetch" href="/jaqi.note/assets/js/50.8c769a7a.js"><link rel="prefetch" href="/jaqi.note/assets/js/51.a9f3fa86.js"><link rel="prefetch" href="/jaqi.note/assets/js/52.a2830407.js"><link rel="prefetch" href="/jaqi.note/assets/js/53.b74a4de1.js"><link rel="prefetch" href="/jaqi.note/assets/js/54.554fc743.js"><link rel="prefetch" href="/jaqi.note/assets/js/55.d978130d.js"><link rel="prefetch" href="/jaqi.note/assets/js/56.1d48a02e.js"><link rel="prefetch" href="/jaqi.note/assets/js/57.53ae226b.js"><link rel="prefetch" href="/jaqi.note/assets/js/58.32493eac.js"><link rel="prefetch" href="/jaqi.note/assets/js/59.257171c0.js"><link rel="prefetch" href="/jaqi.note/assets/js/6.c04646c9.js"><link rel="prefetch" href="/jaqi.note/assets/js/60.e52620bf.js"><link rel="prefetch" href="/jaqi.note/assets/js/61.d36beb58.js"><link rel="prefetch" href="/jaqi.note/assets/js/62.453c8585.js"><link rel="prefetch" href="/jaqi.note/assets/js/63.04762880.js"><link rel="prefetch" href="/jaqi.note/assets/js/64.41a31cd0.js"><link rel="prefetch" href="/jaqi.note/assets/js/65.4599f43c.js"><link rel="prefetch" href="/jaqi.note/assets/js/66.8923dfa6.js"><link rel="prefetch" href="/jaqi.note/assets/js/67.b5c6809d.js"><link rel="prefetch" href="/jaqi.note/assets/js/68.474fdf87.js"><link rel="prefetch" href="/jaqi.note/assets/js/69.44bb4540.js"><link rel="prefetch" href="/jaqi.note/assets/js/7.85822b87.js"><link rel="prefetch" href="/jaqi.note/assets/js/70.64564e12.js"><link rel="prefetch" href="/jaqi.note/assets/js/71.84799590.js"><link rel="prefetch" href="/jaqi.note/assets/js/72.886b34bd.js"><link rel="prefetch" href="/jaqi.note/assets/js/73.0c778a8d.js"><link rel="prefetch" href="/jaqi.note/assets/js/75.b8b63410.js"><link rel="prefetch" href="/jaqi.note/assets/js/76.9ca8be9d.js"><link rel="prefetch" href="/jaqi.note/assets/js/77.42b1585f.js"><link rel="prefetch" href="/jaqi.note/assets/js/78.17ffe736.js"><link rel="prefetch" href="/jaqi.note/assets/js/79.da943937.js"><link rel="prefetch" href="/jaqi.note/assets/js/8.bc86fa50.js"><link rel="prefetch" href="/jaqi.note/assets/js/80.f5b75df6.js"><link rel="prefetch" href="/jaqi.note/assets/js/81.af0855f6.js"><link rel="prefetch" href="/jaqi.note/assets/js/82.5a64f737.js"><link rel="prefetch" href="/jaqi.note/assets/js/83.396602cf.js"><link rel="prefetch" href="/jaqi.note/assets/js/9.17875bd8.js">
    <link rel="stylesheet" href="/jaqi.note/assets/css/0.styles.115dbdb9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jaqi.note/" class="home-link router-link-active"><!----> <span class="site-name">jaqi.note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jaqi.note/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发文档" class="dropdown-title"><span class="title">开发文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发文档" class="mobile-dropdown-title"><span class="title">开发文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jaqi.note/frontend/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/jaqi.note/other/" class="nav-link router-link-active">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://jaqi.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.page
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/ljq547152849" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.csnd
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jaqi.note/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发文档" class="dropdown-title"><span class="title">开发文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发文档" class="mobile-dropdown-title"><span class="title">开发文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jaqi.note/frontend/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/jaqi.note/other/" class="nav-link router-link-active">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://jaqi.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.page
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/ljq547152849" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.csnd
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/jaqi.note/other/" class="sidebar-heading clickable router-link-active open"><span>其它</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/jaqi.note/other/linux/" class="sidebar-link">第一章：Linux</a></li><li><a href="/jaqi.note/other/nginx/" class="sidebar-link">第二章：Nginx</a></li><li><a href="/jaqi.note/other/tcp/" class="sidebar-link">第三章：web协议</a></li><li><a href="/jaqi.note/other/SEO/" class="sidebar-link">第四章：SEO</a></li><li><a href="/jaqi.note/other/git/" class="sidebar-link">第五章：Git</a></li><li><a href="/jaqi.note/other/FreeMarker/" class="sidebar-link">第六章：FreeMarker</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/other/node/introduction/" class="sidebar-heading clickable"><span>第七章：node.js</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/jaqi.note/other/database/" class="sidebar-link">第八章：数据库</a></li><li><a href="/jaqi.note/other/docker/" aria-current="page" class="active sidebar-link">第九章：Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-1-docker概述" class="sidebar-link">9.1 Docker概述</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-2-docker安装" class="sidebar-link">9.2 Docker安装</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-3-docker命令" class="sidebar-link">9.3 Docker命令</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-4-镜像命令" class="sidebar-link">9.4 镜像命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-images查看镜像" class="sidebar-link">docker images查看镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-search搜索镜像" class="sidebar-link">docker search搜索镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-pull下载镜像" class="sidebar-link">docker pull下载镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-rmi删除镜像" class="sidebar-link">docker rmi删除镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-image-prune清理镜像" class="sidebar-link">docker image prune清理镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-tag标记镜像" class="sidebar-link">docker tag标记镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-image-is查看镜像" class="sidebar-link">docker image is查看镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-commit从容器创建一个新的镜像" class="sidebar-link">docker commit从容器创建一个新的镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-build通过文件构建新镜像" class="sidebar-link">docker build通过文件构建新镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-history查看镜像的构建历史" class="sidebar-link">docker history查看镜像的构建历史</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-push发布镜像" class="sidebar-link">docker push发布镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-save将指定镜像保存成tar归档文件" class="sidebar-link">docker save将指定镜像保存成tar归档文件</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-load导入使用docker-save命令导出的镜像" class="sidebar-link">docker load导入使用docker save命令导出的镜像</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-5-容器命令" class="sidebar-link">9.5 容器命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-run运行镜像" class="sidebar-link">docker run运行镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#dokcer-rm删除容器" class="sidebar-link">dokcer rm删除容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#dokcer-start启动容器" class="sidebar-link">dokcer start启动容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#dokcer-restart重启容器" class="sidebar-link">dokcer restart重启容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#dokcer-stop停止容器" class="sidebar-link">dokcer stop停止容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#dokcer-kill强制停止容器" class="sidebar-link">dokcer kill强制停止容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#dokcer-ps查看正在运行的容器" class="sidebar-link">dokcer ps查看正在运行的容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-attach进入容器" class="sidebar-link">docker attach进入容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-exec进入容器" class="sidebar-link">docker exec进入容器</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-logs查看容器日志" class="sidebar-link">docker logs查看容器日志</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-top查看容器中的进程" class="sidebar-link">docker top查看容器中的进程</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-inspect查看容器内部信息" class="sidebar-link">docker inspect查看容器内部信息</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#docker-cp容器与主机之间的数据拷贝" class="sidebar-link">docker cp容器与主机之间的数据拷贝</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#exit退出并停止镜像" class="sidebar-link">exit退出并停止镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#ctrl-p-q只退出镜像不停止" class="sidebar-link">CTRL+P+Q只退出镜像不停止</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-6-dockerfile" class="sidebar-link">9.6 DockerFile</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-7-docker镜像" class="sidebar-link">9.7 Docker镜像</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-8-docker数据卷-volume" class="sidebar-link">9.8 Docker数据卷(volume)</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/other/docker/#_9-9-docker网络" class="sidebar-link">9.9 Docker网络</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_9-1-docker概述"><a href="#_9-1-docker概述" class="header-anchor">#</a> 9.1 Docker概述</h2> <h4 id="docker为什么会出现"><a href="#docker为什么会出现" class="header-anchor">#</a> Docker为什么会出现？</h4> <ul><li>传统的发布流程：</li></ul> <ol><li>发布项目时所有依赖都需要单独配置</li> <li>开发环境、生产环境还要分别配置</li> <li>不能跨平台</li></ol> <ul><li><code>Docker</code>的发布流程：
将业务代码和环境一起打包直接发布到服务器。</li></ul> <ol><li>常用的依赖和配置全部打包到<code>Docker</code>镜像仓库</li> <li>发布时直接下载不需要单独配置</li></ol> <h4 id="docker-hub"><a href="#docker-hub" class="header-anchor">#</a> Docker Hub</h4> <p>Docker的官方镜像仓库</p> <h4 id="docker核心概念"><a href="#docker核心概念" class="header-anchor">#</a> Docker核心概念</h4> <ol><li>&quot;镜像(image)&quot;：依赖的程序和配置文件的集合</li> <li>&quot;仓库(repository)&quot;：存放镜像的位置</li> <li>&quot;容器(container)&quot;：使用虚拟化技术实现的运行镜像的环境</li> <li>&quot;隔离&quot;：容器彼此隔离，互不影响</li></ol> <h4 id="容器的生命周期"><a href="#容器的生命周期" class="header-anchor">#</a> 容器的生命周期</h4> <ol><li><code>created</code>初建状态</li> <li><code>running</code>运行状态</li> <li><code>stopped</code>停止状态</li> <li><code>paused</code>暂停状态</li></ol> <h4 id="底层原理"><a href="#底层原理" class="header-anchor">#</a> 底层原理</h4> <ul><li>Docker的工作原理</li></ul> <blockquote><p>Docker是一个Client-Server结构的系统，Docker的守护进程（一直在后台运行的进程）运行在主机上，通过Socket从客户端访问。
DockerServer接收到Docker-Client的指令,就会执行这个命令。</p></blockquote> <h2 id="_9-2-docker安装"><a href="#_9-2-docker安装" class="header-anchor">#</a> 9.2 Docker安装</h2> <p><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>查看centos内核版本（&gt;=3.10）：<code>uname -r</code></li> <li>安装之前需要卸载旧版：</li></ol> <div class="language- extra-class"><pre class="language-text"><code> sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
</code></pre></div><ol start="3"><li>安装docker环境：<code>yum install -y yum-utils</code></li> <li>配置镜像仓库：</li> <li>更新yum索引：<code>yum makecache fast</code></li> <li>安装docker：<code>yum install docker-ce docker-ce-cli containerd.io</code></li> <li>查看版本：<code>docker version</code></li> <li>启动：<code>systemctl start docker</code></li> <li>运行：<code>docker run hello-world</code></li> <li>查看镜像：<code>docker images</code></li> <li>卸载依赖：<code>yum remove docker-ce docker-ce-cli containerd.io</code></li> <li>卸载资源：<code>rm -rf /var/lib/docker</code>、<code>rm -rf /var/lib/containerd</code></li> <li>使用阿里云镜像加速器：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://g099lhap.mirror.aliyuncs.com&quot;]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre></div><h4 id="docker-run的运行过程"><a href="#docker-run的运行过程" class="header-anchor">#</a> <code>docker run</code>的运行过程</h4> <p><code>docker run &lt;imagesName&gt;</code></p> <blockquote><ol><li>判断是否有这个镜像</li> <li>没有则去DockerHub下载到本地</li> <li>运行镜像</li></ol></blockquote> <h2 id="_9-3-docker命令"><a href="#_9-3-docker命令" class="header-anchor">#</a> 9.3 Docker命令</h2> <p><a href="https://docs.docker.com/reference/" target="_blank" rel="noopener noreferrer">官方命令文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/jaqi.note/docker1.jpg" alt="docker"></p> <p><img src="/jaqi.note/docker2.jpg" alt="docker"></p> <p>查看Docker版本：<code>docker version</code><br>
查看Docker信息：<code>docker info</code><br>
Docker帮助命令：<code>docker &lt;命令&gt; --help</code></p> <h2 id="_9-4-镜像命令"><a href="#_9-4-镜像命令" class="header-anchor">#</a> 9.4 镜像命令</h2> <h3 id="docker-images查看镜像"><a href="#docker-images查看镜像" class="header-anchor">#</a> <code>docker images</code>查看镜像</h3> <p><code>docker images [OPTIONS] [REPOSITORY[:TAG]]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-f</code>：过滤条件<br> <code>-q</code>：只显示ID</p></blockquote></blockquote> <blockquote><p>返回参数</p> <blockquote><p><code>REPOSITORY</code>：镜像仓库<br> <code>TAG</code>：镜像标签<br> <code>TMAGE ID</code>：镜像ID<br> <code>CREATED</code>：镜像创建事件<br> <code>SIZE</code>：镜像创建大小</p></blockquote></blockquote> <ul><li>列出本地镜像中<code>REPOSITORY</code>为<code>ubuntu</code>的镜像列表</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker images  ubuntu
</code></pre></div><h3 id="docker-search搜索镜像"><a href="#docker-search搜索镜像" class="header-anchor">#</a> <code>docker search</code>搜索镜像</h3> <p><code>docker search [OPTIONS] TERM</code></p> <ul><li>从Docker Hub查找所有镜像名包含node，并且收藏数大于 10 的镜像</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker search -f stars=10 node
</code></pre></div><h3 id="docker-pull下载镜像"><a href="#docker-pull下载镜像" class="header-anchor">#</a> <code>docker pull</code>下载镜像</h3> <p><code>docker pull [Registry]/[Repository]/[Image]:[Tag]</code></p> <blockquote><p><code>Registry</code>：注册服务器（用于管理镜像仓库的服务器）<br> <code>Repository</code>：镜像仓库<br> <code>tag</code>：镜像的标签，默认为latest。</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>先从本地搜索，没有则从Docker Hub下载镜像。</p></div> <p>从Docker Hub下载node最新版镜像。</p> <div class="language- extra-class"><pre class="language-text"><code> docker pull node
</code></pre></div><h3 id="docker-rmi删除镜像"><a href="#docker-rmi删除镜像" class="header-anchor">#</a> <code>docker rmi</code>删除镜像</h3> <p><code>docker rmi [OPTIONS] IMAGE [IMAGE...]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-f</code>：强制删除</p></blockquote></blockquote> <ul><li>强制删除本地镜像 runoob/ubuntu:v4。</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker rmi -f runoob/ubuntu:v4 
</code></pre></div><ul><li>删除全部</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker rmi -f $(docker images -aq)
</code></pre></div><h3 id="docker-image-prune清理镜像"><a href="#docker-image-prune清理镜像" class="header-anchor">#</a> <code>docker image prune</code>清理镜像</h3> <p>清理残存、些临时、没有被使用的镜像文件</p> <h3 id="docker-tag标记镜像"><a href="#docker-tag标记镜像" class="header-anchor">#</a> <code>docker tag</code>标记镜像</h3> <p><code>docker tag [SOURCE_IMAGE][:TAG] [TARGET_IMAGE][:TAG]</code></p> <blockquote><p><code>SOURCE_IMAGE</code>原始镜像<br> <code>TARGET_IMAGE</code>：标记后的镜像</p></blockquote> <ul><li>将镜像ubuntu:15.10标记为 runoob/ubuntu:v3 镜像。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker tag ubuntu:15.10 runoob/ubuntu:v3
</code></pre></div><h3 id="docker-image-is查看镜像"><a href="#docker-image-is查看镜像" class="header-anchor">#</a> <code>docker image is</code>查看镜像</h3> <p><code>docker tag [Repository][:TAG]</code></p> <ul><li>查看node镜像</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker image is node
</code></pre></div><h3 id="docker-commit从容器创建一个新的镜像"><a href="#docker-commit从容器创建一个新的镜像" class="header-anchor">#</a> <code>docker commit</code>从容器创建一个新的镜像</h3> <p><code>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-a</code>：提交的镜像作者<br> <code>-c</code>：使用Dockerfile指令来创建镜
<code>-m</code>：提交时的说明文字
<code>-p</code>：在commit时，将容器暂停</p></blockquote></blockquote> <ul><li>将容器a404c6c174a2 保存为新的镜像,并添加提交人信息和说明信息。</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker commit -a &quot;jaqi.l&quot; -m &quot;jaqi.l'The first image of jaqi.l&quot; a404c6c174a2  jaqi.image:v1.0.0 
</code></pre></div><h3 id="docker-build通过文件构建新镜像"><a href="#docker-build通过文件构建新镜像" class="header-anchor">#</a> <code>docker build</code>通过文件构建新镜像</h3> <p><code>docker build [OPTIONS] PATH | URL |</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-f</code>：dockerfile路径<br> <code>-t</code>：镜像名</p></blockquote></blockquote> <div class="language- extra-class"><pre class="language-text"><code>docker build -f dockerfile -t jaqi/centos:v1.0 .
</code></pre></div><h3 id="docker-history查看镜像的构建历史"><a href="#docker-history查看镜像的构建历史" class="header-anchor">#</a> <code>docker history</code>查看镜像的构建历史</h3> <p><code>docker history [IMAGE ID]</code></p> <h3 id="docker-push发布镜像"><a href="#docker-push发布镜像" class="header-anchor">#</a> <code>docker push</code>发布镜像</h3> <p><code>docker push [OPTIONS] NAME[:TAG]</code></p> <p>发布之前需要登陆Docker Hub或阿里云镜像仓库</p> <div class="language- extra-class"><pre class="language-text"><code>docker login ******
docker push jaqi/centos:v1.0
</code></pre></div><h3 id="docker-save将指定镜像保存成tar归档文件"><a href="#docker-save将指定镜像保存成tar归档文件" class="header-anchor">#</a> <code>docker save</code>将指定镜像保存成tar归档文件</h3> <p><code>docker save [OPTIONS] [IMAGE...]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-o</code>：输出到的文件
将镜像 runoob/ubuntu:v3 生成 my_ubuntu_v3.tar 文档</p></blockquote></blockquote> <div class="language- extra-class"><pre class="language-text"><code>docker save -o my_ubuntu_v3.tar runoob/ubuntu:v3
</code></pre></div><h3 id="docker-load导入使用docker-save命令导出的镜像"><a href="#docker-load导入使用docker-save命令导出的镜像" class="header-anchor">#</a> <code>docker load</code>导入使用<code>docker save</code>命令导出的镜像</h3> <p><code>docker load [OPTIONS]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-i</code>：指定导入的文件<br> <code>-q</code>：精简输出信息</p></blockquote></blockquote> <p>导入my_ubuntu_v3.tar</p> <div class="language- extra-class"><pre class="language-text"><code>docker load --i my_ubuntu_v3.tar
</code></pre></div><h2 id="_9-5-容器命令"><a href="#_9-5-容器命令" class="header-anchor">#</a> 9.5 容器命令</h2> <p>有了镜像才能创建容器</p> <h3 id="docker-run运行镜像"><a href="#docker-run运行镜像" class="header-anchor">#</a> <code>docker run</code>运行镜像</h3> <p><code>docker run [OPTIONS] [image]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-name</code>：容器名字<br> <code>-d</code>：后台运行方式<br> <code>-rt</code>：用完即删<br> <code>-it</code>：交互方式进行<br> <code>-v</code>：挂载数据卷<br> <code>-e</code>：环境配置<br> <code>-p</code>：指定容器端口</p> <blockquote><p><code>ip:主机端口:容器端口</code><br> <code>主机端口:容器端口</code><br> <code>容器端口</code></p></blockquote></blockquote></blockquote> <blockquote><blockquote><p><code>-P</code>：(大写P)随机容器端口</p></blockquote></blockquote> <ul><li>启动centos并进入容器</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker run -it centos /bin/bash
</code></pre></div><h3 id="dokcer-rm删除容器"><a href="#dokcer-rm删除容器" class="header-anchor">#</a> <code>dokcer rm</code>删除容器</h3> <p><code>docker rm [image]</code></p> <ul><li>批量删除多个</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker rm -f 09d7636201f2 104ea3abc382 c9054809ffad e3ae598e7447 f9ce4763ae59 9d86d1f77623 109b97c45b65 
</code></pre></div><h3 id="dokcer-start启动容器"><a href="#dokcer-start启动容器" class="header-anchor">#</a> <code>dokcer start</code>启动容器</h3> <p><code>docker start [image]</code></p> <h3 id="dokcer-restart重启容器"><a href="#dokcer-restart重启容器" class="header-anchor">#</a> <code>dokcer restart</code>重启容器</h3> <p><code>docker restart [image]</code></p> <h3 id="dokcer-stop停止容器"><a href="#dokcer-stop停止容器" class="header-anchor">#</a> <code>dokcer stop</code>停止容器</h3> <p><code>docker stop [image]</code></p> <h3 id="dokcer-kill强制停止容器"><a href="#dokcer-kill强制停止容器" class="header-anchor">#</a> <code>dokcer kill</code>强制停止容器</h3> <p><code>docker kill [image]</code></p> <h3 id="dokcer-ps查看正在运行的容器"><a href="#dokcer-ps查看正在运行的容器" class="header-anchor">#</a> <code>dokcer ps</code>查看正在运行的容器</h3> <p><code>docker ps [OPTIONS]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-a</code>：查看运行过的容器<br> <code>-n</code>：查看最近运行的容器<br> <code>-q</code>：只显示容器编号</p></blockquote></blockquote> <h3 id="docker-attach进入容器"><a href="#docker-attach进入容器" class="header-anchor">#</a> <code>docker attach</code>进入容器</h3> <p><code>docker attach [image]</code>：进入容器正在运行的终端，不会开启新进程，退出后会自动停止容器服务</p> <h3 id="docker-exec进入容器"><a href="#docker-exec进入容器" class="header-anchor">#</a> <code>docker exec</code>进入容器</h3> <p><code>docker exec -it [image] [COMMAND]</code>：进入容器后开启有一个新的终端</p> <h3 id="docker-logs查看容器日志"><a href="#docker-logs查看容器日志" class="header-anchor">#</a> <code>docker logs</code>查看容器日志</h3> <p><code>docker logs [OPTIONS] [image]</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-f</code>：显示日志<br> <code>-t</code>：显示日志条数</p></blockquote></blockquote> <h3 id="docker-top查看容器中的进程"><a href="#docker-top查看容器中的进程" class="header-anchor">#</a> <code>docker top</code>查看容器中的进程</h3> <p><code>docker top [image]</code></p> <h3 id="docker-inspect查看容器内部信息"><a href="#docker-inspect查看容器内部信息" class="header-anchor">#</a> <code>docker inspect</code>查看容器内部信息</h3> <p><code>docker inspect [image]</code></p> <h3 id="docker-cp容器与主机之间的数据拷贝"><a href="#docker-cp容器与主机之间的数据拷贝" class="header-anchor">#</a> <code>docker cp</code>容器与主机之间的数据拷贝</h3> <p><code>docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</code></p> <blockquote><p>OPTIONS：可选项</p> <blockquote><p><code>-r</code>：递归</p></blockquote></blockquote> <ul><li>将主机/www/jaqi目录拷贝到容器96f7f14e99ab的/www目录下。</li></ul> <div class="language-CMD extra-class"><pre class="language-text"><code> docker cp /www/jaqi 96f7f14e99ab:/www/
</code></pre></div><ul><li>将容器96f7f14e99ab的/www目录拷贝到主机的/tmp目录中</li></ul> <div class="language-CMD extra-class"><pre class="language-text"><code> docker cp  96f7f14e99ab:/www /tmp/
</code></pre></div><h3 id="exit退出并停止镜像"><a href="#exit退出并停止镜像" class="header-anchor">#</a> <code>exit</code>退出并停止镜像</h3> <h3 id="ctrl-p-q只退出镜像不停止"><a href="#ctrl-p-q只退出镜像不停止" class="header-anchor">#</a> <code>CTRL+P+Q</code>只退出镜像不停止</h3> <h2 id="_9-6-dockerfile"><a href="#_9-6-dockerfile" class="header-anchor">#</a> 9.6 DockerFile</h2> <p>DockerFile就是用来构建docker镜像的构建文件（docker命令脚本）</p> <h4 id="dockerfile语法规则"><a href="#dockerfile语法规则" class="header-anchor">#</a> DockerFile语法规则：</h4> <ol><li>每个关键字（指令）都必须是大写字母</li> <li>顺序从上到下</li> <li>#表示注释</li> <li>每个指令都会创建一个新的镜像层，并提交</li></ol> <h4 id="dockerfile指令"><a href="#dockerfile指令" class="header-anchor">#</a> DockerFile指令：</h4> <p><code>FROM</code>：基础镜像<br> <code>MAINTAINEW</code>：镜像是谁写的，姓名+邮箱<br> <code>RUN</code>：镜像构建的时候需要运行的命令<br> <code>ADD</code>：添加内容<br> <code>WORKDIR</code>：镜像的工作目录<br> <code>VOLUME</code>：挂载的目录<br> <code>EXPOSE</code>：暴露端口<br> <code>CMD</code>：指定这个容器启动的时候要运行的命令，只有最后一个会生效<br> <code>ENTRYPOINT</code>：指定这个容器启动的时候要运行的命令，可以追加命令<br> <code>ONBUILD</code>：当构建一个被继承DockerFile，这个时候会运行ONBUILD的指令，触发指令<br> <code>COPY</code>：类似ADD，将我们文件拷贝到镜像中<br> <code>ENV</code>：构建时候设置环境变量</p> <div class="custom-block tip"><p class="custom-block-title">`CMD`与`ENTRYPOINT`的区别</p> <p><code>CMD</code>：不能再docker run的时候再追加命令，只能替换。<br> <code>ENTRYPOINT</code>：可以直接追加命令</p></div> <ul><li>构建一个Jaqi.L/centos</li></ul> <div class="language-DockerFile extra-class"><pre class="language-dockerfile"><code><span class="token keyword">FROM</span> centos

<span class="token keyword">MAINTAINER</span> Jaqi.L&lt;Jaqi.l@qq.com<span class="token punctuation">&gt;</span>

<span class="token keyword">ENV</span> MYPATH /usr/local

WORKDIK $MYPATH

<span class="token keyword">RUN</span> yum <span class="token punctuation">-</span>y install vim

<span class="token keyword">EXPOSE</span> 80

<span class="token keyword">CMD</span> echo $MYPATH

<span class="token keyword">CMD</span> echo <span class="token string">&quot;---end---&quot;</span>

<span class="token keyword">CMD</span> /bin/bash
</code></pre></div><h2 id="_9-7-docker镜像"><a href="#_9-7-docker镜像" class="header-anchor">#</a> 9.7 Docker镜像</h2> <h2 id="_9-8-docker数据卷-volume"><a href="#_9-8-docker数据卷-volume" class="header-anchor">#</a> 9.8 Docker数据卷(volume)</h2> <h4 id="数据卷联合文件系统"><a href="#数据卷联合文件系统" class="header-anchor">#</a> 数据卷联合文件系统</h4> <p><img src="/jaqi.note/docker-volume.jpg" alt="docker"></p> <h4 id="数据共享"><a href="#数据共享" class="header-anchor">#</a> 数据共享</h4> <p>容器之间共享数据的一种技术（将docker容器中的目录挂载到外部服务器上【卷名】），实现容器的持久化和同步操作，而且容器间也可以数据共享。</p> <p><code>docker run -v [服务器目录(卷名)]:[容器目录]:[r0/rw]</code></p> <p>容器限制权限：</p> <blockquote><p><code>r0</code>:只读<br> <code>rw</code>或不填:可读可写</p></blockquote> <ul><li>将容器的home目录挂载到服务器的/home/test目录</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker run -it -v /home/test:/home
</code></pre></div><h4 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="header-anchor">#</a> 具名和匿名挂载：</h4> <p>（不指定服务器的目录（卷名），自动挂载到<code>/var/lib/docker/volumes/xxx/_data</code>）</p> <h4 id="docker-volume查看卷"><a href="#docker-volume查看卷" class="header-anchor">#</a> <code>docker volume</code>查看卷</h4> <p><code>docker volume ls</code>查看全部卷<br> <code>docker volume inspect [卷名]</code>查看卷详情</p> <h4 id="数据卷容器"><a href="#数据卷容器" class="header-anchor">#</a> 数据卷容器</h4> <p><code>--volume-from</code>通过一个容器给其他容器共享数据。</p> <ul><li>docker01的数据同步到docker02</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker run -it --name docker02 --volume-from docker01 jaqi/centos:v1.0
</code></pre></div><h2 id="_9-9-docker网络"><a href="#_9-9-docker网络" class="header-anchor">#</a> 9.9 Docker网络</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jaqi.note/other/database/" class="prev">
        第八章：数据库
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/jaqi.note/assets/js/app.2feb56e4.js" defer></script><script src="/jaqi.note/assets/js/2.cf0a2c66.js" defer></script><script src="/jaqi.note/assets/js/74.8606f137.js" defer></script>
  </body>
</html>

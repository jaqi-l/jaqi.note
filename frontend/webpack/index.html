<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7.1概念： | jaqi.note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/jaqi.note/logo.jpg">
    <script>
                var _hmt = _hmt || [];
                (function() {
                    var hm = document.createElement("script");
                    hm.src = "https://hm.baidu.com/hm.js?b7303024b1d1000570507a8af21071bd";
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(hm, s);
                })();
           </script>
    <meta name="description" content="字典，是惟一把成功放在工作之前的地方！">
    
    <link rel="preload" href="/jaqi.note/assets/css/0.styles.115dbdb9.css" as="style"><link rel="preload" href="/jaqi.note/assets/js/app.2feb56e4.js" as="script"><link rel="preload" href="/jaqi.note/assets/js/2.cf0a2c66.js" as="script"><link rel="preload" href="/jaqi.note/assets/js/69.44bb4540.js" as="script"><link rel="prefetch" href="/jaqi.note/assets/js/10.bbb7f5b9.js"><link rel="prefetch" href="/jaqi.note/assets/js/11.0777787e.js"><link rel="prefetch" href="/jaqi.note/assets/js/12.324b68a8.js"><link rel="prefetch" href="/jaqi.note/assets/js/13.25969066.js"><link rel="prefetch" href="/jaqi.note/assets/js/14.24634d09.js"><link rel="prefetch" href="/jaqi.note/assets/js/15.2f709246.js"><link rel="prefetch" href="/jaqi.note/assets/js/16.2d513b30.js"><link rel="prefetch" href="/jaqi.note/assets/js/17.0b7190b8.js"><link rel="prefetch" href="/jaqi.note/assets/js/18.5ee79291.js"><link rel="prefetch" href="/jaqi.note/assets/js/19.13863cb8.js"><link rel="prefetch" href="/jaqi.note/assets/js/20.af731f74.js"><link rel="prefetch" href="/jaqi.note/assets/js/21.486a10a5.js"><link rel="prefetch" href="/jaqi.note/assets/js/22.99b8fe60.js"><link rel="prefetch" href="/jaqi.note/assets/js/23.d9f1d02b.js"><link rel="prefetch" href="/jaqi.note/assets/js/24.0ce77f67.js"><link rel="prefetch" href="/jaqi.note/assets/js/25.d2874685.js"><link rel="prefetch" href="/jaqi.note/assets/js/26.6b1a7a12.js"><link rel="prefetch" href="/jaqi.note/assets/js/27.5205440e.js"><link rel="prefetch" href="/jaqi.note/assets/js/28.4a0ecf0b.js"><link rel="prefetch" href="/jaqi.note/assets/js/29.75f81631.js"><link rel="prefetch" href="/jaqi.note/assets/js/3.b1112b9c.js"><link rel="prefetch" href="/jaqi.note/assets/js/30.9f4eb4b3.js"><link rel="prefetch" href="/jaqi.note/assets/js/31.b5f463e4.js"><link rel="prefetch" href="/jaqi.note/assets/js/32.bff16e8e.js"><link rel="prefetch" href="/jaqi.note/assets/js/33.f4259706.js"><link rel="prefetch" href="/jaqi.note/assets/js/34.fdf7e104.js"><link rel="prefetch" href="/jaqi.note/assets/js/35.06d12526.js"><link rel="prefetch" href="/jaqi.note/assets/js/36.69d33875.js"><link rel="prefetch" href="/jaqi.note/assets/js/37.dc856357.js"><link rel="prefetch" href="/jaqi.note/assets/js/38.401a813c.js"><link rel="prefetch" href="/jaqi.note/assets/js/39.e16351b2.js"><link rel="prefetch" href="/jaqi.note/assets/js/4.cc27441e.js"><link rel="prefetch" href="/jaqi.note/assets/js/40.747bfc8f.js"><link rel="prefetch" href="/jaqi.note/assets/js/41.f81f1388.js"><link rel="prefetch" href="/jaqi.note/assets/js/42.8b53911f.js"><link rel="prefetch" href="/jaqi.note/assets/js/43.2e34dffd.js"><link rel="prefetch" href="/jaqi.note/assets/js/44.774b02bc.js"><link rel="prefetch" href="/jaqi.note/assets/js/45.263144fc.js"><link rel="prefetch" href="/jaqi.note/assets/js/46.06a4bb65.js"><link rel="prefetch" href="/jaqi.note/assets/js/47.56662806.js"><link rel="prefetch" href="/jaqi.note/assets/js/48.4f786d3a.js"><link rel="prefetch" href="/jaqi.note/assets/js/49.630b68a6.js"><link rel="prefetch" href="/jaqi.note/assets/js/5.573cc974.js"><link rel="prefetch" href="/jaqi.note/assets/js/50.8c769a7a.js"><link rel="prefetch" href="/jaqi.note/assets/js/51.a9f3fa86.js"><link rel="prefetch" href="/jaqi.note/assets/js/52.a2830407.js"><link rel="prefetch" href="/jaqi.note/assets/js/53.b74a4de1.js"><link rel="prefetch" href="/jaqi.note/assets/js/54.554fc743.js"><link rel="prefetch" href="/jaqi.note/assets/js/55.d978130d.js"><link rel="prefetch" href="/jaqi.note/assets/js/56.1d48a02e.js"><link rel="prefetch" href="/jaqi.note/assets/js/57.53ae226b.js"><link rel="prefetch" href="/jaqi.note/assets/js/58.32493eac.js"><link rel="prefetch" href="/jaqi.note/assets/js/59.257171c0.js"><link rel="prefetch" href="/jaqi.note/assets/js/6.c04646c9.js"><link rel="prefetch" href="/jaqi.note/assets/js/60.e52620bf.js"><link rel="prefetch" href="/jaqi.note/assets/js/61.d36beb58.js"><link rel="prefetch" href="/jaqi.note/assets/js/62.453c8585.js"><link rel="prefetch" href="/jaqi.note/assets/js/63.04762880.js"><link rel="prefetch" href="/jaqi.note/assets/js/64.41a31cd0.js"><link rel="prefetch" href="/jaqi.note/assets/js/65.4599f43c.js"><link rel="prefetch" href="/jaqi.note/assets/js/66.8923dfa6.js"><link rel="prefetch" href="/jaqi.note/assets/js/67.b5c6809d.js"><link rel="prefetch" href="/jaqi.note/assets/js/68.474fdf87.js"><link rel="prefetch" href="/jaqi.note/assets/js/7.85822b87.js"><link rel="prefetch" href="/jaqi.note/assets/js/70.64564e12.js"><link rel="prefetch" href="/jaqi.note/assets/js/71.84799590.js"><link rel="prefetch" href="/jaqi.note/assets/js/72.886b34bd.js"><link rel="prefetch" href="/jaqi.note/assets/js/73.0c778a8d.js"><link rel="prefetch" href="/jaqi.note/assets/js/74.8606f137.js"><link rel="prefetch" href="/jaqi.note/assets/js/75.b8b63410.js"><link rel="prefetch" href="/jaqi.note/assets/js/76.9ca8be9d.js"><link rel="prefetch" href="/jaqi.note/assets/js/77.42b1585f.js"><link rel="prefetch" href="/jaqi.note/assets/js/78.17ffe736.js"><link rel="prefetch" href="/jaqi.note/assets/js/79.da943937.js"><link rel="prefetch" href="/jaqi.note/assets/js/8.bc86fa50.js"><link rel="prefetch" href="/jaqi.note/assets/js/80.f5b75df6.js"><link rel="prefetch" href="/jaqi.note/assets/js/81.af0855f6.js"><link rel="prefetch" href="/jaqi.note/assets/js/82.5a64f737.js"><link rel="prefetch" href="/jaqi.note/assets/js/83.396602cf.js"><link rel="prefetch" href="/jaqi.note/assets/js/9.17875bd8.js">
    <link rel="stylesheet" href="/jaqi.note/assets/css/0.styles.115dbdb9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jaqi.note/" class="home-link router-link-active"><!----> <span class="site-name">jaqi.note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jaqi.note/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发文档" class="dropdown-title"><span class="title">开发文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发文档" class="mobile-dropdown-title"><span class="title">开发文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jaqi.note/frontend/" class="nav-link router-link-active">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/jaqi.note/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://jaqi.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.page
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/ljq547152849" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.csnd
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jaqi.note/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发文档" class="dropdown-title"><span class="title">开发文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发文档" class="mobile-dropdown-title"><span class="title">开发文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jaqi.note/frontend/" class="nav-link router-link-active">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/jaqi.note/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://jaqi.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.page
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/ljq547152849" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.csnd
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/jaqi.note/frontend/" class="sidebar-heading clickable router-link-active open"><span>前端</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/html/introduction/" class="sidebar-heading clickable open"><span>第一章：HTML5</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/jaqi.note/frontend/html/introduction/" class="sidebar-link">1.1 HTML概述</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/jaqi.note/frontend/html/element/" class="sidebar-heading clickable"><span>1.2 html元素</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/jaqi.note/frontend/html/attribute/" class="sidebar-link">1.3 html属性</a></li><li><a href="/jaqi.note/frontend/html/outliner/" class="sidebar-link">1.4 HTML5大纲算法</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/css/introduction/" class="sidebar-heading clickable"><span>第二章：CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/javascript/var/" class="sidebar-heading clickable"><span>第三章：JavaScript</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/jaqi.note/frontend/jquery/" class="sidebar-link">第四章：jQuery</a></li><li><a href="/jaqi.note/frontend/ajax/" class="sidebar-link">第五章：ajax</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/vue/introduction/" class="sidebar-heading clickable"><span>第六章：vue.js</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/jaqi.note/frontend/webpack/" aria-current="page" class="active sidebar-link">第七章：webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-1概念" class="sidebar-link">7.1概念：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-1-1安装与使用" class="sidebar-link">7.1.1安装与使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2配置详解" class="sidebar-link">7.2配置详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-1入口entry" class="sidebar-link">7.2.1入口entry</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-2输出output" class="sidebar-link">7.2.2输出output</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-3加载器loader" class="sidebar-link">7.2.3加载器loader</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-4插件plugins" class="sidebar-link">7.2.4插件plugins</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-5模式mode" class="sidebar-link">7.2.5模式mode</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-6浏览器兼容性browser-compatibility" class="sidebar-link">7.2.6浏览器兼容性browser compatibility</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-7文件监听watch及" class="sidebar-link">7.2.7文件监听watch及</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-8-文件指纹" class="sidebar-link">7.2.8 文件指纹</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-2-9-摇树优化tree-shaking" class="sidebar-link">7.2.9 摇树优化tree shaking</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-10-scopehoisting" class="sidebar-link">7.4.10 ScopeHoisting</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-11-代码分割" class="sidebar-link">7.4.11 代码分割</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-12-构建日志、构建异常和中断处理" class="sidebar-link">7.4.12 构建日志、构建异常和中断处理</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3常用lader指南" class="sidebar-link">7.3常用lader指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-1打包es6" class="sidebar-link">7.3.1打包ES6：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-2打包css" class="sidebar-link">7.3.2打包css：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-3打包less" class="sidebar-link">7.3.3打包less：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-3打包图片-字体" class="sidebar-link">7.3.3打包图片/字体：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-4自动补齐浏览器前缀" class="sidebar-link">7.3.4自动补齐浏览器前缀：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-5rem转换px2rem-loader、lib-flexible库" class="sidebar-link">7.3.5rem转换px2rem-loader、lib-flexible库：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-6资源的内联raw-loader" class="sidebar-link">7.3.6资源的内联raw-loader</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-7eslint规范eslint-loader" class="sidebar-link">7.3.7ESLint规范eslint-loader</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-8ssr打包" class="sidebar-link">7.3.8SSR打包</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#打包vue" class="sidebar-link">打包Vue：</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-6自定义插件" class="sidebar-link">7.3.6自定义插件</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-3-7常用插件" class="sidebar-link">7.3.7常用插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4常用plugins指南" class="sidebar-link">7.4常用plugins指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-1-热更新webpack-dev-server" class="sidebar-link">7.4.1 热更新webpack-dev-server</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-2-html文件的编译、压缩html-webpack-plugin" class="sidebar-link">7.4.2 html文件的编译、压缩Html-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-3-多页面打包html-webpack-plugin、glob" class="sidebar-link">7.4.3 多页面打包html-webpack-plugin、glob</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-4-js文件压缩terser-webpack-plugin" class="sidebar-link">7.4.4 js文件压缩terser-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-5-css文件压缩optimize-css-assets-webpack-plugin-cssnano" class="sidebar-link">7.4.5 css文件压缩optimize-css-assets-webpack-plugin/cssnano</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-6-自动清理构建目录clean-webpack-plugin" class="sidebar-link">7.4.6 自动清理构建目录clean-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-7-source-map" class="sidebar-link">7.4.7 source map</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-4-8-基础库的分离html-webpack-externals-plugin-splitchunksplugin" class="sidebar-link">7.4.8 基础库的分离html-webpack-externals-plugin/SplitChunksPlugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-5进阶用法" class="sidebar-link">7.5进阶用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-5-1构建配置抽离成npm包" class="sidebar-link">7.5.1构建配置抽离成npm包</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-5-2构建测试" class="sidebar-link">7.5.2构建测试</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/webpack/#_7-5-3构建优化" class="sidebar-link">7.5.3构建优化</a></li></ul></li></ul></li><li><a href="/jaqi.note/frontend/miniprogram/" class="sidebar-link">第八章：小程序</a></li><li><a href="/jaqi.note/frontend/TypeScript/" class="sidebar-link">第九章：TypeScript</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_7-1概念"><a href="#_7-1概念" class="header-anchor">#</a> 7.1概念：</h2> <ul><li>构建工具的作用：</li></ul> <blockquote><p>转换ES6语法
转换JXS
CSS前缀不全、预处理器
压缩混淆
图片压缩</p></blockquote> <ul><li>常用构建工具的演变<br>
ant+YUI Tool → grunt → fis3/gulp → rollup/parcel/webpack</li> <li>webpack的优势<br>
webpack是一个现代JavaScript应用程序的静态模块打包工具。当webpack处理应用程序时，它会在内部构建一个依赖图(dependency graph)，此依赖图会映射项目所需的每个模块，并生成一个或多个bundle</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>webpack 4.x</p></div> <h3 id="_7-1-1安装与使用"><a href="#_7-1-1安装与使用" class="header-anchor">#</a> 7.1.1安装与使用</h3> <h4 id="安装"><a href="#安装" class="header-anchor">#</a> 安装：</h4> <ul><li>5.x</li></ul> <div class="language-CMD extra-class"><pre class="language-text"><code>mkdir webpack-demo &amp;&amp; cd webpack-demo
npm init -y
npm install --save-dev webpack
</code></pre></div><ul><li>4.x</li></ul> <div class="language-CMD extra-class"><pre class="language-text"><code>mkdir webpack-demo &amp;&amp; cd webpack-demo
npm init -y
npm install --save-dev webpack-cli
</code></pre></div><h4 id="目录"><a href="#目录" class="header-anchor">#</a> 目录：</h4> <p>webpack-demo</p> <blockquote><p>|- package.json //模块描述文件<br>
|- webpack.config.js //插件配置文件<br>
|- index.html //页面入口<br>
|- /dist //打包存储文件夹<br>
   |--  bundle.js //目标文件<br>
|- /src //目标文件夹<br>
   |-- index.js //目标文件</p></blockquote> <h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用：</h4> <ul><li>直接运行
node_modules/.bin/webpack.cmd 双击运行</li> <li>通过npx命令运行</li></ul> <div class="language-CMD extra-class"><pre class="language-text"><code>npx webpack
</code></pre></div><ul><li>在package.json中设置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-CMD extra-class"><pre class="language-text"><code>npm run build
</code></pre></div><h2 id="_7-2配置详解"><a href="#_7-2配置详解" class="header-anchor">#</a> 7.2配置详解</h2> <p>webpack可以无需使用任何配置文件。webpack会假定项目的入口起点为src/index，然后会在dist/main.js输出结果，并且在生产环境开启压缩和优化。
你的项目还需要继续扩展此能力，为此你可以在项目根目录下创建一个webpack.config.js 文件，webpack会自动使用它。
完整示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 模块</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//多入口配置</span>
        index<span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> 
        nav<span class="token operator">:</span><span class="token string">'./src/nav.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  output<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 输出</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token comment">// 输出目录dirnam表示当前目录，必须是绝对路径（使用Node.js 的path模块）</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件名</span>
    <span class="token comment">// 「入口分块(entry chunk)」的文件名模板</span>
    publicPath<span class="token operator">:</span> <span class="token string">&quot;/assets/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 输出解析文件的目录，url 相对于 HTML 页面</span>
    library<span class="token operator">:</span> <span class="token string">&quot;MyLibrary&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包出的库名称,import引用时的名称</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包出的库类型</span>
    libraryExport<span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 关于模块配置</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 模块规则（配置 loader、解析器等选项）</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app/demo-files&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 这里是匹配条件，每个选项都接收一个正则表达式或字符串</span>
        <span class="token comment">// test 和 include 具有相同的作用，都是必须匹配选项</span>
        <span class="token comment">// exclude 是必不匹配选项（优先于 test 和 include）</span>
        <span class="token comment">// 最佳实践：</span>
        <span class="token comment">// - 只在 test 和 文件名匹配 中使用正则表达式</span>
        <span class="token comment">// - 在 include 和 exclude 中使用绝对路径数组</span>
        <span class="token comment">// - 尽量避免 exclude，更倾向于使用 include</span>
        issuer<span class="token operator">:</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> include<span class="token punctuation">,</span> exclude <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// issuer 条件（导入源）</span>
        enforce<span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
        enforce<span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 标识应用这些规则，即使规则覆盖（高级选项）</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 应该应用的 loader，它相对上下文解析</span>
        <span class="token comment">// 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的</span>
        <span class="token comment">// 查看 webpack 1 升级指南。</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// loader 的可选项</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 应用多个 loader 和选项</span>
          <span class="token string">&quot;htmllint-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;html-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">/* ... */</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> oneOf<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* rules */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 只使用这些嵌套规则之一</span>
      <span class="token punctuation">{</span> rules<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* rules */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 使用所有这些嵌套规则（合并可用条件）</span>
      <span class="token punctuation">{</span> resource<span class="token operator">:</span> <span class="token punctuation">{</span> and<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 仅当所有条件都匹配时才匹配</span>
      <span class="token punctuation">{</span> resource<span class="token operator">:</span> <span class="token punctuation">{</span> or<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> resource<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 任意条件匹配时匹配（默认为数组）</span>
      <span class="token punctuation">{</span> resource<span class="token operator">:</span> <span class="token punctuation">{</span> not<span class="token operator">:</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
      <span class="token comment">// 条件不匹配时匹配</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/* 高级模块配置（点击展示） */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解析模块请求的选项</span>
    <span class="token comment">// （不适用于对 loader 解析）</span>
    modules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 用于查找模块的目录</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用的扩展名</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 模块别名列表</span>
      <span class="token string">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;new-module&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 起别名：&quot;module&quot; -&gt; &quot;new-module&quot; 和 &quot;module/path/file&quot; -&gt; &quot;new-module/path/file&quot;</span>
      <span class="token string">&quot;only-module$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;new-module&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 起别名 &quot;only-module&quot; -&gt; &quot;new-module&quot;，但不匹配 &quot;only-module/path/file&quot; -&gt; &quot;new-module/path/file&quot;</span>
      <span class="token string">&quot;module&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app/third/module.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 起别名 &quot;module&quot; -&gt; &quot;./app/third/module.js&quot; 和 &quot;module/file&quot; 会导致错误</span>
      <span class="token comment">// 模块别名相对于当前上下文导入</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/* 可供选择的别名语法（点击展示） */</span>
    <span class="token comment">/* 高级解析选项（点击展示） */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    hints<span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 枚举</span>
    maxAssetSize<span class="token operator">:</span> <span class="token number">200000</span><span class="token punctuation">,</span> <span class="token comment">// 整数类型（以字节为单位）</span>
    maxEntrypointSize<span class="token operator">:</span> <span class="token number">400000</span><span class="token punctuation">,</span> <span class="token comment">// 整数类型（以字节为单位）</span>
    <span class="token function-variable function">assetFilter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">assetFilename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 提供资源文件名的断言函数</span>
      <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.css'</span><span class="token punctuation">)</span> <span class="token operator">||</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">// enum</span>
  <span class="token comment">// 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试</span>
  <span class="token comment">// 牺牲了构建速度的 `source-map' 是最详细的。</span>
  context<span class="token operator">:</span> __dirname<span class="token punctuation">,</span> <span class="token comment">// string（绝对路径！）</span>
  <span class="token comment">// webpack 的主目录</span>
  <span class="token comment">// entry 和 module.rules.loader 选项</span>
  <span class="token comment">// 相对于此目录解析</span>
  target<span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 枚举</span>
  <span class="token comment">// bundle 应该运行的环境</span>
  <span class="token comment">// 更改 块加载行为(chunk loading behavior) 和 可用模块(available module)</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^@angular\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 不要遵循/打包这些模块，而是在运行时从环境中请求他们</span>
  serve<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//object</span>
    port<span class="token operator">:</span> <span class="token number">1337</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 构建日志配置</span>
  stats<span class="token operator">:</span> <span class="token string">&quot;errors-only&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 精确控制要显示的 bundle 信息</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// proxy URLs to backend development server</span>
      <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// boolean | string | array, static file location</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// enable gzip compression</span>
    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// true for index.html upon 404, object for multiple paths</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// hot module replacement. Depends on HotModuleReplacementPlugin</span>
    https<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// true for self-signed, object for cert authority</span>
    noInfo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// only errors &amp; warns on hot reload</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 附加插件列表</span>
  <span class="token comment">/* 高级配置（点击展示） */</span>
  resolveLoader<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* 等同于 resolve */</span> <span class="token punctuation">}</span>
  <span class="token comment">// 独立解析选项的 loader</span>
  parallelism<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// number</span>
  <span class="token comment">// 限制并行处理模块的数量</span>
  profile<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
  <span class="token comment">// 捕获时机信息</span>
  bail<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//boolean</span>
  <span class="token comment">// 在第一个错误出错时抛出，而不是无视错误。</span>
  cache<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
  <span class="token comment">// 禁用/启用缓存</span>
  watch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
  <span class="token comment">// 启用观察</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    aggregateTimeout<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// in ms</span>
    <span class="token comment">// 将多个更改聚合到单个重构建(rebuild)</span>
    poll<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    poll<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// 间隔单位 ms</span>
    <span class="token comment">// 启用轮询观察模式</span>
    <span class="token comment">// 必须用在不通知更改的文件系统中</span>
    <span class="token comment">// 即 nfs shares（译者注：Network FileSystem，最大的功能就是可以透過網路，讓不同的機器、不同的作業系統、可以彼此分享個別的檔案 ( share file )）</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  node<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Polyfills and mocks to run Node.js-</span>
    <span class="token comment">// environment code in non-Node environments.</span>
    console<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// boolean | &quot;mock&quot;</span>
    global<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean | &quot;mock&quot;</span>
    process<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
    __filename<span class="token operator">:</span> <span class="token string">&quot;mock&quot;</span><span class="token punctuation">,</span> <span class="token comment">// boolean | &quot;mock&quot;</span>
    __dirname<span class="token operator">:</span> <span class="token string">&quot;mock&quot;</span><span class="token punctuation">,</span> <span class="token comment">// boolean | &quot;mock&quot;</span>
    Buffer<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean | &quot;mock&quot;</span>
    setImmediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// boolean | &quot;mock&quot; | &quot;empty&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  recordsPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build/records.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  recordsInputPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build/records.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  recordsOutputPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build/records.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// TODO</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-2-1入口entry"><a href="#_7-2-1入口entry" class="header-anchor">#</a> 7.2.1入口<code>entry</code></h3> <p>指示webpack应该使用哪个模块，来作为构建其内部依赖图(dependency graph) 的开始。</p> <ul><li>单入口</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 单入口可以简写</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>多入口</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    search<span class="token operator">:</span> <span class="token string">'./src/search.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-2-2输出output"><a href="#_7-2-2输出output" class="header-anchor">#</a> 7.2.2输出<code>output</code></h3> <p>告诉webpack在哪里输出它所创建的bundle，以及如何命名这些文件。主要输出文件的默认值是<code>./dist/main.js</code>，其他生成文件默认放置在<code>./dist</code>文件夹中。注意即使可以存在多个entry起点，但只指定一个output配置。</p> <ul><li>单入口输出</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// node核心模块 path 用于用于处理文件路径</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 设置bundle输出路径</span>
    filename<span class="token operator">:</span> <span class="token string">'my-first-webpack.bundle.js'</span><span class="token comment">// 设置bundle的名称</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>多入口输出</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    search<span class="token operator">:</span> <span class="token string">'./src/search.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span> <span class="token comment">// 占位符name为入口文件的名字 例如app、search</span>
    path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：./dist/app.js, ./dist/search.js</span>
</code></pre></div><h3 id="_7-2-3加载器loader"><a href="#_7-2-3加载器loader" class="header-anchor">#</a> 7.2.3加载器<code>loader</code></h3> <p>webpack只能理解JavaScript和JSON文件。loader让webpack能够去处理其他类型的文件，并将它们转换为有效 模块，以供应用程序使用，以及被添加到依赖图中。</p> <div class="language-CMD extra-class"><pre class="language-text"><code>npm install --save-dev raw-loader
npm install --save-dev css-loader
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 设置bundle输出路径</span>
    filename<span class="token operator">:</span> <span class="token string">'my-first-webpack.bundle.js'</span><span class="token comment">// 设置bundle的名称</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// test属性用于表示那些文件需要转换  use表示需要用哪个loader</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'raw-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>常用的loader：</p> <blockquote><p><code>babel-loader</code>:转换ES6/ES7等新JS语法<br> <code>css-loader</code>:打包css<br> <code>less-loader</code>:less转换成css<br> <code>ts-loader</code>:ts转换成js<br> <code>file-loader</code>:图片和字体等打包<br> <code>rea-loader</code>:将文件以字符串的形式打包<br> <code>thread-loader</code>:多进程打包js和css</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>相互依赖的loader，要按依赖顺序书写，上至下，左至右。</p></div> <h4 id="其他引用方式"><a href="#其他引用方式" class="header-anchor">#</a> 其他引用方式</h4> <ul><li>内联
使用<code>!</code>为整个规则添加前缀，可以覆盖配置中的所有loader定义。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'style-loader!css-loader?modules!./styles.css'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>CLI</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>webpack <span class="token operator">--</span>module<span class="token operator">-</span>bind jade<span class="token operator">-</span>loader <span class="token operator">--</span>module<span class="token operator">-</span>bind <span class="token string">'css=style-loader!css-loader'</span>
</code></pre></div><h3 id="_7-2-4插件plugins"><a href="#_7-2-4插件plugins" class="header-anchor">#</a> 7.2.4插件<code>plugins</code></h3> <p>loader用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过npm安装</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于访问内置插件</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'raw-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>常用的plugins：</p> <blockquote><p><code>CommonsChunkPlugin</code>:将chunks相同的模块代码提取成公共js<br> <code>CleanWebpackPlugin</code>:清理构建目录<br> <code>ExtractTextWebpackPlugin</code>:将css从bundle文件中独立出css文件<br> <code>CopyWebapckPlugin</code>:将文件或者文件夹拷贝到输出目录<br> <code>HtmlWebpackPlugin</code>:创建html文件去承载输出bundle<br> <code>UgligyjsWebpackPlugin</code>:压缩js<br> <code>ZipWebpackPlugin</code>:将打包出的资源生成一个zip包<br> <code>webpack-merge</code>合并webpack.config配置文件</p></blockquote> <h3 id="_7-2-5模式mode"><a href="#_7-2-5模式mode" class="header-anchor">#</a> 7.2.5模式<code>mode</code></h3> <p>通过选择development,production或none之中的一个，来设置mode参数，你可以启用webpack内置在相应环境下的优化。其默认值为production。</p> <ul><li>webpack.cofig.js文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>也可以在package.json中设置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --mode=production&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-2-6浏览器兼容性browser-compatibility"><a href="#_7-2-6浏览器兼容性browser-compatibility" class="header-anchor">#</a> 7.2.6浏览器兼容性<code>browser compatibility</code></h3> <p>webpack 支持所有符合 ES5 标准 的浏览器（不支持 IE8 及以下版本）。webpack 的 import() 和 require.ensure() 需要 Promise。如果你想要支持旧版本浏览器，在使用这些表达式之前，还需要提前加载polyfill。</p> <h3 id="_7-2-7文件监听watch及"><a href="#_7-2-7文件监听watch及" class="header-anchor">#</a> 7.2.7文件监听watch及</h3> <p>源代码发生变化是，自动重新构建打包。</p> <ul><li>webpack.cofig.js文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  watch<span class="token operator">:</span> <span class="token string">'true'</span>，
  watchOptions<span class="token operator">:</span><span class="token punctuation">{</span>
    ignored<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">// 忽略文件，支持正则</span>
    aggregateTimeout<span class="token operator">:</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// 监听到变化后的延时时间</span>
    poll<span class="token operator">:</span><span class="token number">1000</span> <span class="token comment">//监听时间间隔</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>也可以在package.json中设置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --watch webpack-dev-server&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-2-8-文件指纹"><a href="#_7-2-8-文件指纹" class="header-anchor">#</a> 7.2.8 文件指纹</h3> <p><code>Hash</code>：和整个项目的构建相关，主要项目有文件修改，整个项目构建的hash值就会更改。
<code>Chunkhash</code>：和webpack打包的chunk有关，不同的entry会产生不同的chunkhash值
<code>Contenthash</code>：根据文件内容来定义hash，文件内容不变，则contenthash不变</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
      filename<span class="token operator">:</span> <span class="token string">'[name]_[chunkhash8].bundle.js'</span> <span class="token comment">// js文件建议使用chunkhash，:8表示8位hash</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> 
                <span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'img/[name]_[hash:8].[ext]'</span><span class="token punctuation">}</span> <span class="token comment">// 图片字体等建议使用hash</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> 
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css|less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// 单独打包css文件时候要使用MiniCssExtractPlugin.loader去替换style-loader</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>  
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>，
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// 通过mini-css-extract-plugin插件将css文件单独提取出来</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      filename<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[name]_[contenthash:8].css</span><span class="token template-punctuation string">`</span></span> <span class="token comment">//css文件建议使用contenthash</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-2-9-摇树优化tree-shaking"><a href="#_7-2-9-摇树优化tree-shaking" class="header-anchor">#</a> 7.2.9 摇树优化tree shaking</h3> <p>概念：一个模块的多个方法，只要有一个被使用了，整个模块就会被打包。<code>tree shaking</code>就是只打包用到的，没用到的，在<code>uglify</code>阶段去除掉。
使用：webpack默认支持，只需要在.babelrc里设置modules:false即可。
要求：必须是ES6的语法，CJS的方法不支持。</p> <blockquote><ol><li>去除无用的css文件：<code>purgecss-webpack-plugin</code></li></ol></blockquote> <h3 id="_7-4-10-scopehoisting"><a href="#_7-4-10-scopehoisting" class="header-anchor">#</a> 7.4.10 ScopeHoisting</h3> <p>概念：将所有模块的代码根据引用的顺序，适当重命名后放在一个函数作用域里，以减少函数声明代码和内存的开销。
使用：mode为production时默认开启。
要求：必须是ES6的语法，CJS的方法不支持。</p> <h3 id="_7-4-11-代码分割"><a href="#_7-4-11-代码分割" class="header-anchor">#</a> 7.4.11 代码分割</h3> <p>概念：将代码分割，当相应的代码运行时再进行代码加载。
使用：</p> <blockquote><p>CJS:require.ensure
ES6:动态import（ES2020、需要babel转译）</p> <blockquote><p>babel转译:</p> <blockquote><p>安装：<code>npm i @babel/plugin-syntax-dynamic-import --save-dev</code>
使用：</p> <blockquote><p>.babelrc
<code>js { &quot;plugins&quot;:[&quot;@babel/plugin-syntax-dynamic-import&quot;] }</code></p></blockquote></blockquote></blockquote></blockquote> <h3 id="_7-4-12-构建日志、构建异常和中断处理"><a href="#_7-4-12-构建日志、构建异常和中断处理" class="header-anchor">#</a> 7.4.12 构建日志、构建异常和中断处理</h3> <p><code>stats</code>参数：</p> <blockquote><p><code>errors-only</code>:只在发生错误时输出
<code>minimal</code>:只在发生错误或有新的编译时输出。
<code>none</code>:没有输出
<code>normal</code>:标准输出
<code>verbose</code>:全部输出</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    stats<span class="token operator">:</span><span class="token string">'errors-only'</span> <span class="token comment">// 构建日志配置</span>
<span class="token punctuation">}</span>
</code></pre></div><p>查看构建错误码：</p> <blockquote><p>0表示成功,非0失败</p> <div class="language-CMD extra-class"><pre class="language-text"><code>ECHO $?
</code></pre></div></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>friendly-errors-webpack-plugin</code>构建日志优化工具</p></div> <h2 id="_7-3常用lader指南"><a href="#_7-3常用lader指南" class="header-anchor">#</a> 7.3常用lader指南</h2> <h3 id="_7-3-1打包es6"><a href="#_7-3-1打包es6" class="header-anchor">#</a> 7.3.1打包ES6：</h3> <p>插件：<code>npm i babel-loader @babel/core @babel/preset-env -D</code>
配置：<br>
webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token punctuation">{</span>
        app<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        filename<span class="token operator">:</span><span class="token string">'[name].js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mode<span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>.babelrc：文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/preser-env&quot;</span>，
     <span class="token string">&quot;@vue/app&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/proposal-class-properties&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-2打包css"><a href="#_7-3-2打包css" class="header-anchor">#</a> 7.3.2打包css：</h3> <p>插件：<code>npm i style-loader，css-loader -D</code></p> <p>配置：<br>
webpack.cofig.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
 rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">//正则表达式以css为结尾</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>  <span class="token comment">//按顺序从右往左</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-3打包less"><a href="#_7-3-3打包less" class="header-anchor">#</a> 7.3.3打包less：</h3> <p>插件：<code>npm i style-loader css-loader less less-loader -D</code></p> <p>配置：<br>
webpack.cofig.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
 rules<span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'less-loader'</span><span class="token punctuation">]</span>  <span class="token comment">//按顺序从右往左</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-3打包图片-字体"><a href="#_7-3-3打包图片-字体" class="header-anchor">#</a> 7.3.3打包图片/字体：</h3> <ul><li>通过<code>file-loader</code>打包
插件：<code>npm i file-loader -D</code></li></ul> <p>配置：<br>
webpack.cofig.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
 rules<span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>use<span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//打包图片</span>
  <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ttf|woff|woff2|otf|eot)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>use<span class="token operator">:</span><span class="token string">'file-loader'</span><span class="token punctuation">}</span> <span class="token comment">//打包字体</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>通过<code>url-loader</code>转成base64，用于打包较小的资源，
插件：<code>npm i url-loader -D</code></li></ul> <p>配置：<br>
webpack.cofig.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|svg|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
                    options<span class="token operator">:</span> <span class="token punctuation">{</span>
                        limit<span class="token operator">:</span> <span class="token number">1024</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//打包图片</span>
        <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ttf|woff|woff2|otf|eot)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
                    options<span class="token operator">:</span> <span class="token punctuation">{</span>
                        limit<span class="token operator">:</span> <span class="token number">1024</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span> <span class="token comment">//打包字体</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">哈希文件名的好处</p> <ul><li>如果发布新版本，发现用户正在浏览老网页，需要刷新一次才能看见新版本。发布新版时会把老目录删除，然后覆盖新文件。</li> <li>增量覆盖：保留原来的文件，避免旧文件被覆盖无法访问。</li></ul></div> <h3 id="_7-3-4自动补齐浏览器前缀"><a href="#_7-3-4自动补齐浏览器前缀" class="header-anchor">#</a> 7.3.4自动补齐浏览器前缀：</h3> <p>插件：<code>npm i postcss-loader autoprefixer -D</code>
配置：</p> <p>webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
 rules<span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    loader<span class="token operator">:</span><span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function-variable function">plugins</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          browsers<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'last 2 version'</span><span class="token punctuation">,</span> <span class="token string">'&gt;1%'</span><span class="token punctuation">,</span><span class="token string">'ios 7'</span><span class="token punctuation">]</span> <span class="token comment">// 兼容最近的2个版本，兼容使用率大于2%，兼容 ios7 的版本</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-5rem转换px2rem-loader、lib-flexible库"><a href="#_7-3-5rem转换px2rem-loader、lib-flexible库" class="header-anchor">#</a> 7.3.5rem转换px2rem-loader、lib-flexible库：</h3> <p>插件：<code>npm i px2rem-loader -D</code>/<code>npm i lib-flexible -S</code></p> <p>配置：<br>
webpack.cofig.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
 rules<span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    loader<span class="token operator">:</span><span class="token string">'px2rem-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span><span class="token punctuation">{</span>
      remUnit<span class="token operator">:</span><span class="token number">75</span><span class="token punctuation">,</span>  <span class="token comment">// 转换系数，1rem = 75px</span>
      remPrecesion<span class="token operator">:</span><span class="token number">8</span> <span class="token comment">// 转换时的精准度，小数点后8位</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>main.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'lib-flexible'</span>
</code></pre></div><p>viewprot设置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1.0,maximum=scale=1.0&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>lib-flexible</code>库制度根据设备计算font-size</p></div> <h3 id="_7-3-6资源的内联raw-loader"><a href="#_7-3-6资源的内联raw-loader" class="header-anchor">#</a> 7.3.6资源的内联raw-loader</h3> <p>插件：<code>npm i raw-loader@0.5.1 -D</code>
优点：减少http请求，避免页面闪动。</p> <ul><li>html内联：</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>${require('raw-loader!babel-loader!./meta.html')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>js内联：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>$<span class="token punctuation">{</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'raw-loader!babel-loader!../node_modules/lib-flexible'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ul><li>css内联：</li></ul> <ol><li>通过<code>style-loader</code></li> <li><code>html-inline-css-webpack-plugin</code></li></ol> <h3 id="_7-3-7eslint规范eslint-loader"><a href="#_7-3-7eslint规范eslint-loader" class="header-anchor">#</a> 7.3.7ESLint规范eslint-loader</h3> <p>插件：<code>npm i eslint-loader babel-eslint --save-dev</code>
配置：<br>
webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span><span class="token string">'eslint-loader'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>.eslintrc.js：文件</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token string">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babel-eslint&quot;</span>
    <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 继承基础配置规则</span>
        <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;env&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>  <span class="token comment">// 配置环境变量</span>
      <span class="token string">&quot;browser&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;node&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token string">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 配置规则</span>
      <span class="token string">&quot;indent&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token comment">//配置缩进规则为4个空格</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>进行eslint检查：
在package.json中设置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;eslint&quot;</span><span class="token operator">:</span><span class="token string">&quot;eslint --fix&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-8ssr打包"><a href="#_7-3-8ssr打包" class="header-anchor">#</a> 7.3.8SSR打包</h3> <p>webpack.ssr.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    global<span class="token punctuation">.</span>window <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token punctuation">{</span>
        app<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        filename<span class="token operator">:</span><span class="token string">'[name]-server.js'</span><span class="token punctuation">,</span>
        libraryTarget<span class="token operator">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包出的库类型</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mode<span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在package.json中设置</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build:ssr&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack --config webpack.ssr.js&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">打包SSR存在的问题：</p> <p>node.js中没有document,window
fetch或ajax请求要改写成isomorphic-fetch或axios
<code>style-loader</code>替换成<code>isomorphic-style-loader</code>或直接忽略css的解析</p></div> <h3 id="打包vue"><a href="#打包vue" class="header-anchor">#</a> 打包Vue：</h3> <p>插件：vuevue-loadervue-template-compiler</p> <p>配置：</p> <p>index.js文件:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

el<span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>

<span class="token function-variable function">render</span><span class="token operator">:</span><span class="token parameter">c</span><span class="token operator">=&gt;</span><span class="token function">c</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>App.vue文件:</p> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>

我是App组件

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token keyword">return</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>webpack.config.js文件:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> VueLoaderPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vue-loader/lib/plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

plugins<span class="token operator">:</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="_7-3-6自定义插件"><a href="#_7-3-6自定义插件" class="header-anchor">#</a> 7.3.6自定义插件</h3> <h4 id="引用方法一"><a href="#引用方法一" class="header-anchor">#</a> 引用方法一：</h4> <p>webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>

rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>

test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

use<span class="token operator">:</span><span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./src/loader/myloader'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h4 id="引用方法二"><a href="#引用方法二" class="header-anchor">#</a> 引用方法二：</h4> <p>将自定义插件的文件放入node_modules文件中</p> <p>webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>

rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>

test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'myloader'</span><span class="token punctuation">]</span>

<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="引用方法三"><a href="#引用方法三" class="header-anchor">#</a> 引用方法三：</h4> <p>webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>resolveLoader<span class="token operator">:</span><span class="token punctuation">{</span>
  modules<span class="token operator">:</span><span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./src/loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;./node_modules&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'myloader'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-7常用插件"><a href="#_7-3-7常用插件" class="header-anchor">#</a> 7.3.7常用插件</h3> <h2 id="_7-4常用plugins指南"><a href="#_7-4常用plugins指南" class="header-anchor">#</a> 7.4常用plugins指南</h2> <h3 id="_7-4-1-热更新webpack-dev-server"><a href="#_7-4-1-热更新webpack-dev-server" class="header-anchor">#</a> 7.4.1 热更新webpack-dev-server</h3> <p>插件：<code>npm i webpack-dev-server -g</code></p> <ul><li>webpack.cofig.js文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span><span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span><span class="token string">'./dist'</span><span class="token punctuation">,</span>
    hot<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>在package.json中设置</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;dev&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack-dev-server --open&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>远程热更新webpack-dev-middleware</li></ul> <h3 id="_7-4-2-html文件的编译、压缩html-webpack-plugin"><a href="#_7-4-2-html文件的编译、压缩html-webpack-plugin" class="header-anchor">#</a> 7.4.2 html文件的编译、压缩Html-webpack-plugin</h3> <p>插件：<code>npm i html-webpack-plugin --save-dev</code>
作用：根据配置的html产生一个引入打包后文件的html
配置：</p> <p>webpack.cofig.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Htmlwebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//引入插件</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">Htmlwebpackplugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		template<span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span> <span class="token comment">//模板</span>
		filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包出来的文件名</span>
		inject<span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token comment">// 路径放置位置 head/body </span>
		title<span class="token operator">:</span> <span class="token string">'this is index'</span><span class="token punctuation">,</span> <span class="token comment">//打包后的htmltitle</span>
		minify<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//html设置压缩参数</span>
      html5<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
      collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			preserveLineBreaks<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
      minifyCSS<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
      minifyJS<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
      removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">// 指定chunks</span>
		excludeChunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//排除chunks</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Index.html文件：</p> <div class="language-html extra-class"><pre class="language-html"><code>&lt;%= htmlWebpackPlugin.options.title%&gt; //获取htmlWebpackPlugin下的title的数据 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= htmlWebpackPlugin.files.chunks.index.entry%&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_7-4-3-多页面打包html-webpack-plugin、glob"><a href="#_7-4-3-多页面打包html-webpack-plugin、glob" class="header-anchor">#</a> 7.4.3 多页面打包html-webpack-plugin、glob</h3> <p>一个页面对应一个<code>entry</code>、一个<code>html-webpacl-plugin</code>
优势：利于SEO。缺点：每次新增或删除页面都需要配置webpack,利用<code>glob-sync</code>可以解决这个问题。
<code>npm i glob -D</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> glob <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'glob'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">setMPA</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> entry <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> htmlWebpackPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> entryFiles <span class="token operator">=</span> glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/*/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>entryFiles<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> entryFile <span class="token operator">=</span> entryFiles<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> match <span class="token operator">=</span> entryFile<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src\/(.*)\/index\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pageName <span class="token operator">=</span> match <span class="token operator">&amp;&amp;</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    entry<span class="token punctuation">[</span>pageName<span class="token punctuation">]</span> <span class="token operator">=</span> entryFile<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pageName<span class="token punctuation">,</span><span class="token number">1111</span><span class="token punctuation">,</span>entryFile<span class="token punctuation">)</span>
    htmlWebpackPlugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/index.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//模板</span>
        filename<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 打包出来的文件名</span>
        inject<span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token comment">// 路径放置位置 head/body </span>
        minify<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//html设置压缩参数</span>
        chunks<span class="token operator">:</span> <span class="token punctuation">[</span>pageName<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">// 指定chunks</span>
          html5<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
          collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          preserveLineBreaks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          minifyCSS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          minifyJS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">,</span>
    htmlWebpackPlugins
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>entry<span class="token punctuation">,</span>htmlWebpackPlugins<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">setMPA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span>entry<span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name]_[hash:8].js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>htmlWebpackPlugins<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-4-4-js文件压缩terser-webpack-plugin"><a href="#_7-4-4-js文件压缩terser-webpack-plugin" class="header-anchor">#</a> 7.4.4 js文件压缩terser-webpack-plugin</h3> <p><code>uglifyjs-webpack-plugin:webpack</code>4.x已内置，不支持ES6语法,不建议新项目使用。
<code>terser-webpack-plugin</code>5.x已内置,4.x需要单独安装。
插件：<code>npm i terser-webpack-plugin --save-dev</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js(\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span> <span class="token comment">// 通过正则匹配要压缩的文件</span>
        include<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/includes</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 指定要压缩的文件</span>
         exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/excludes</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 排除文件</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-4-5-css文件压缩optimize-css-assets-webpack-plugin-cssnano"><a href="#_7-4-5-css文件压缩optimize-css-assets-webpack-plugin-cssnano" class="header-anchor">#</a> 7.4.5 css文件压缩optimize-css-assets-webpack-plugin/cssnano</h3> <p>插件：<code>npm i optimize-css-assets-webpack-plugin --save-dev</code>/<code>npm i cssnano --save-dev</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Htmlwebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Htmlwebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;cssnano&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	entry<span class="token operator">:</span><span class="token punctuation">{</span>
		app<span class="token operator">:</span><span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
		search<span class="token operator">:</span><span class="token string">'./src/search.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token operator">:</span><span class="token punctuation">{</span>
		filename<span class="token operator">:</span><span class="token string">'[name][chunkhash:8].js'</span><span class="token punctuation">,</span>
		path<span class="token operator">:</span>__dirname<span class="token operator">+</span><span class="token string">'./dist'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	Plugins<span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">OptimizeCssAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			assetNameRegExp<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
			cssProcessor<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cssnano'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-4-6-自动清理构建目录clean-webpack-plugin"><a href="#_7-4-6-自动清理构建目录clean-webpack-plugin" class="header-anchor">#</a> 7.4.6 自动清理构建目录clean-webpack-plugin</h3> <p>插件：<code>npm i clean-webpack-plugin -D</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Htmlwebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	entry<span class="token operator">:</span><span class="token punctuation">{</span>
		app<span class="token operator">:</span><span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
		search<span class="token operator">:</span><span class="token string">'./src/search.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token operator">:</span><span class="token punctuation">{</span>
		filename<span class="token operator">:</span><span class="token string">'[name][chunkhash:8].js'</span><span class="token punctuation">,</span>
		path<span class="token operator">:</span>__dirname<span class="token operator">+</span><span class="token string">'./dist'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	Plugins<span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>也可以使用<code>rimraf</code>插件清理构建目录</p> <h3 id="_7-4-7-source-map"><a href="#_7-4-7-source-map" class="header-anchor">#</a> 7.4.7 source map</h3> <p>作用：通过source map定位到源代码。
source map关键字：</p> <blockquote><p><code>eval</code>：使用<code>eval</code>包裹模块代码。
<code>source map</code>产生.map文件
<code>cheap</code>不包含代码的所在列信息
<code>inline</code>将.map做为DataURI嵌入，不单独生成.map文件
<code>module</code>包含loader的sourcemap
source map类型：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过npm安装</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于访问内置插件</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
      app<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span><span class="token punctuation">{</span>
      path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span><span class="token string">'[name].js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span><span class="token string">'eval'</span> <span class="token comment">// eval\source-map\inline-source-map\cheap-source-map</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>线上环境排查问题时可以开启，否则要关闭source map，否则会暴露源代码。</p></div> <h3 id="_7-4-8-基础库的分离html-webpack-externals-plugin-splitchunksplugin"><a href="#_7-4-8-基础库的分离html-webpack-externals-plugin-splitchunksplugin" class="header-anchor">#</a> 7.4.8 基础库的分离html-webpack-externals-plugin/SplitChunksPlugin</h3> <ul><li><code>html-webpack-externals-plugin</code>
插件：<code>npm i html-webpack-externals-plugin -D</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackExternalsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-externals-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
	Plugins<span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackExternalsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      externals<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          module<span class="token operator">:</span><span class="token string">'react'</span><span class="token punctuation">,</span>
          entry<span class="token operator">:</span><span class="token string">'dist/jquery.min.js'</span><span class="token punctuation">,</span> <span class="token comment">//可以是本地也可以是cdn文件</span>
          global<span class="token operator">:</span><span class="token string">'React'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          module<span class="token operator">:</span><span class="token string">'react-dom'</span><span class="token punctuation">,</span>
          entry<span class="token operator">:</span><span class="token string">'dist/jquery.min.js'</span><span class="token punctuation">,</span><span class="token comment">//可以是本地也可以是cdn文件</span>
          global<span class="token operator">:</span><span class="token string">'ReactDom'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>SplitChunksPlugin</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span> <span class="token comment">//三选一：&quot;initial&quot; 初始化，&quot;all&quot;(默认就是all)，&quot;async&quot;（动态加载） </span>
      minSize<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>  <span class="token comment">// 形成一个新代码块最小的体积,只有 &gt;= minSize 的bundle会被拆分出来</span>
      maxSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//拆分之前最大的数值，默认为0，即不做限制</span>
      minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//引入次数，如果为2 那么一个资源最少被引用两次才可以被拆分出来</span>
      maxAsyncRequests<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token comment">// 按需加载的最大并行请求数</span>
      maxInitialRequests<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 一个入口最大并行请求数</span>
      automaticNameDelimiter<span class="token operator">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span> <span class="token comment">// 文件名的连接符</span>
      name<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        vendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_7-5进阶用法"><a href="#_7-5进阶用法" class="header-anchor">#</a> 7.5进阶用法</h2> <h3 id="_7-5-1构建配置抽离成npm包"><a href="#_7-5-1构建配置抽离成npm包" class="header-anchor">#</a> 7.5.1构建配置抽离成npm包</h3> <p>意义：统一构建脚本，开发者无需在关注构建配置。合理的抽离拆分，编辑维护管理。
通过多个配置文件管理不同环境的配置文件。</p> <blockquote><p><code>webpack.base.js</code>:基础包
<code>webpack.dev.js</code>开发环境包
<code>webpack.prod.js</code>生成环境包
<code>webpack.ssr.js</code>ssr环境包
合并配置包<code>webpack-merge</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span>prodConfig<span class="token punctuation">)</span>
</code></pre></div><h3 id="_7-5-2构建测试"><a href="#_7-5-2构建测试" class="header-anchor">#</a> 7.5.2构建测试</h3> <ul><li>冒烟测试
指提交测试之前开发人员进行的预测试。主要排查基本功能是否可用。</li></ul> <blockquote><p>构建是否成功。
构建目录是否有js、css、html等文件输出。
单元测试工具：<code>mocha</code>+<code>chai</code></p></blockquote> <ol><li>安装:<code>npm i mocha chai -D</code></li> <li>创建test目录，增加test.js测试文件</li> <li>在package.json中设置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span><span class="token string">&quot;node_modules/mocha/bin/_mocha&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>执行测试<code>npm run test</code></li></ol> <ul><li>持续集成
代码在合并主干之前，根据测试用例进行自动化测试，主要有一个测试用例失败，就不能集成。
优点：快速发现错误，防止分支大幅偏离主干。
持续集成工具：<code>Travis CI</code></li></ul> <ol><li>https://travis-ci.org/ 使用github账号登陆</li> <li>在github创建项目、将项目同步到travis-ci。</li> <li>项目的根目录下创建.travis.yml,内容如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>language<span class="token operator">:</span>node_js  <span class="token comment">// 语音</span>
sudo<span class="token operator">:</span><span class="token boolean">false</span>  <span class="token comment">// 管理员权限</span>
cache<span class="token operator">:</span>
  app<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 是否需要缓存</span>
  directories<span class="token operator">:</span>
    <span class="token operator">-</span>node_modules

node_js<span class="token operator">:</span>stable  <span class="token comment">// node版本</span>

install<span class="token operator">:</span>
  <span class="token operator">-</span> npm install <span class="token operator">-</span><span class="token constant">D</span> <span class="token comment">// 安装构建依赖</span>
  <span class="token operator">-</span> cd <span class="token operator">/</span>test<span class="token operator">/</span>template<span class="token operator">-</span>project
  <span class="token operator">-</span> npm install <span class="token operator">-</span><span class="token constant">D</span>  <span class="token comment">// 安装模板项目依赖</span>
script<span class="token operator">:</span>
 <span class="token operator">-</span> npm test
</code></pre></div><ol start="4"><li>提交代码，travis-ci会自动根据测试用例进行测试。</li></ol> <h3 id="_7-5-3构建优化"><a href="#_7-5-3构建优化" class="header-anchor">#</a> 7.5.3构建优化</h3> <ul><li>构建统计<code>stats</code>（颗粒度比较粗，不容易看出问题）
在package.json中使用<code>stats</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build:stats&quot;</span><span class="token operator">:</span><span class="token string">&quot;webpack--env production --json &gt; stats.json&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>构建速度分析<code>speed-measure-webpack-plugin</code> <code>npm i speed-measure-webpack-plugin</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> speedMeasureWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'speed-measure-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">speedMeasureWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span> smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	entry<span class="token operator">:</span><span class="token punctuation">{</span>
		app<span class="token operator">:</span><span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
		search<span class="token operator">:</span><span class="token string">'./src/search.js'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token operator">:</span><span class="token punctuation">{</span>
		filename<span class="token operator">:</span><span class="token string">'[name][chunkhash:8].js'</span><span class="token punctuation">,</span>
		path<span class="token operator">:</span>__dirname<span class="token operator">+</span><span class="token string">'./dist'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>构建体积分析<code>webpack-bundle-analyzer</code> <code>npm i webpack-bundle-analyzer -D</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>BundleAnalyzerPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">speedMeasureWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
		Plugins<span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>速度优化</li></ul> <ol><li>使用高版本的webpack和node.js</li> <li>多进程多实例构建<code>thread-loader</code>(webpack 4.x内置)/<code>paraller-webpack</code>/<code>HappyPack</code>（不维护了）</li></ol> <blockquote><p><code>thread-loader</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'thread-loader'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <ol start="3"><li>多进程多实例并行压缩<code>parallel-uglify-plugin</code>/<code>uglifyjs-webpack-plugin</code>(不支持压缩ES6语法)/<code>terser-webpack-plugin</code>(webpack 4.x内置)</li></ol> <blockquote><p><code>terser-webpack-plugin</code>:详见<a href="/jaqi.note/frontend/webpack/#_7-4-4-js文件压缩terser-webpack-plugin">7.8.4</a></p></blockquote> <ol start="4"><li>分包<code>html-webpack-externals-plugin</code>（对业务包不友善）/<code>DLLPlugin</code>预编译资源模块（将基础包和业务包打包成一个文件）</li></ol> <blockquote><p><code>html-webpack-externals-plugin</code>:详见[7.4.8](/frontend/webpack/#_7-4-8-基础库的分离html-webpack-externals-plugin-splitchunksplugin
<code>DLLPlugin</code>:
webpack.config.dll.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span><span class="token punctuation">{</span>
    library<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token string">'react'</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">react-dom</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span><span class="token punctuation">{</span>
    filename<span class="token operator">:</span><span class="token string">'[name]-[chunkhash].dll.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'build/library'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    library<span class="token operator">:</span><span class="token string">'[name]'</span>
  <span class="token punctuation">}</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DLLPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span><span class="token string">'[name]_[hash]'</span><span class="token punctuation">,</span>
       path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'build/library/[name].json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>webpack.config.js文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DLLReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       manifest<span class="token operator">:</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./build/library/library.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <ol start="5"><li>缓存：提升二次构建速度<code>babel-loader</code>/<code>terser-webpack-plugin</code>/<code>cache-loader</code>或<code>hard-source-webpack-plugin</code></li></ol> <blockquote><p><code>babel-loader</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      rules<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> use<span class="token operator">:</span> <span class="token string">'babel-loader?cacheDirectory=true'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>terser-webpack-plugin</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
   minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    
       test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js(\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span> <span class="token comment">// 通过正则匹配要压缩的文件</span>
       include<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/includes</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 指定要压缩的文件</span>
       exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/excludes</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 排除文件</span>
       paraller<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启多进程多实例并行压缩</span>
       cache<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 开启缓存</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>缓存文件存放在<code>node_modules/.cache</code></p></blockquote> <ol start="6"><li>缩小构建目标</li></ol> <blockquote><p>利用<code>alias</code>优化路径，减少文件查找。</p></blockquote> <ul><li>体积优化</li></ul> <ol><li>图片压缩基于node库的<code>imagemin</code>或tinypng API</li></ol> <blockquote><p><code>imagemin</code>优点：定制配置丰富，可以引入第三方插件（例如：pngquant），可以处理多种格式。</p> <div class="language-js extra-class"><pre class="language-js"><code>rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(gif|png|jpe?g|svg)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">'image-webpack-loader'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        mozjpeg<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//jpeg格式</span>
          progressive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        optipng<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//png格式</span>
          enabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        pngquant<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//png格式</span>
          quality<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.65</span><span class="token punctuation">,</span> <span class="token number">0.90</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          speed<span class="token operator">:</span> <span class="token number">4</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        gifsicle<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//gif格式</span>
          interlaced<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        webp<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//webp格式</span>
          quality<span class="token operator">:</span> <span class="token number">75</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div></blockquote> <ol start="2"><li>摇树优化tree shaking详见<a href="/jaqi.note/frontend/webpack/#_7-2-9-摇树优化tree-shaking">7.2.9</a></li> <li>动态Polyfill服务</li></ol> <blockquote><p>polyfill服务原理：识别浏览器User Agent下发不同的polyfill。<a href="https://polyfill.io/v3/polyfill.min.js" target="_blank" rel="noopener noreferrer">polyfill在线识别服务<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol start="4"><li>ScopeHoisting<a href="/jaqi.note/frontend/webpack/#_7-4-10-scopehoisting">7.4.10</a></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="http://caibaojian.com/vue-design/" target="_blank" rel="noopener noreferrer" class="prev">
        6.14 vue源码

        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></span> <span class="next"><a href="/jaqi.note/frontend/miniprogram/">
        第八章：小程序
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/jaqi.note/assets/js/app.2feb56e4.js" defer></script><script src="/jaqi.note/assets/js/2.cf0a2c66.js" defer></script><script src="/jaqi.note/assets/js/69.44bb4540.js" defer></script>
  </body>
</html>

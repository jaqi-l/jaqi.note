<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3.16.1 let和const命令 | jaqi.note</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/jaqi.note/logo.jpg">
    <script>
                var _hmt = _hmt || [];
                (function() {
                    var hm = document.createElement("script");
                    hm.src = "https://hm.baidu.com/hm.js?b7303024b1d1000570507a8af21071bd";
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(hm, s);
                })();
           </script>
    <meta name="description" content="字典，是惟一把成功放在工作之前的地方！">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/jaqi.note/assets/css/0.styles.12fde6e5.css" as="style"><link rel="preload" href="/jaqi.note/assets/js/app.a8f46c6d.js" as="script"><link rel="preload" href="/jaqi.note/assets/js/2.244728d6.js" as="script"><link rel="preload" href="/jaqi.note/assets/js/37.ef428da6.js" as="script"><link rel="prefetch" href="/jaqi.note/assets/js/10.a3d0cc58.js"><link rel="prefetch" href="/jaqi.note/assets/js/11.e51336c9.js"><link rel="prefetch" href="/jaqi.note/assets/js/12.2b2d4813.js"><link rel="prefetch" href="/jaqi.note/assets/js/13.221369e0.js"><link rel="prefetch" href="/jaqi.note/assets/js/14.eb9cf3af.js"><link rel="prefetch" href="/jaqi.note/assets/js/15.ad6b7f26.js"><link rel="prefetch" href="/jaqi.note/assets/js/16.ad1a8e83.js"><link rel="prefetch" href="/jaqi.note/assets/js/17.f8467963.js"><link rel="prefetch" href="/jaqi.note/assets/js/18.91cbda41.js"><link rel="prefetch" href="/jaqi.note/assets/js/19.1608df84.js"><link rel="prefetch" href="/jaqi.note/assets/js/20.1190128a.js"><link rel="prefetch" href="/jaqi.note/assets/js/21.2945f88f.js"><link rel="prefetch" href="/jaqi.note/assets/js/22.056953db.js"><link rel="prefetch" href="/jaqi.note/assets/js/23.b5d59bc1.js"><link rel="prefetch" href="/jaqi.note/assets/js/24.2c21d3a7.js"><link rel="prefetch" href="/jaqi.note/assets/js/25.6312812f.js"><link rel="prefetch" href="/jaqi.note/assets/js/26.82ec113c.js"><link rel="prefetch" href="/jaqi.note/assets/js/27.560f09bf.js"><link rel="prefetch" href="/jaqi.note/assets/js/28.67b96731.js"><link rel="prefetch" href="/jaqi.note/assets/js/29.7c8cbfa8.js"><link rel="prefetch" href="/jaqi.note/assets/js/3.ac7fa2ce.js"><link rel="prefetch" href="/jaqi.note/assets/js/30.2698e05b.js"><link rel="prefetch" href="/jaqi.note/assets/js/31.93b84d6e.js"><link rel="prefetch" href="/jaqi.note/assets/js/32.d9d0f81a.js"><link rel="prefetch" href="/jaqi.note/assets/js/33.dedb4302.js"><link rel="prefetch" href="/jaqi.note/assets/js/34.ffeea0c2.js"><link rel="prefetch" href="/jaqi.note/assets/js/35.d7cb5d3a.js"><link rel="prefetch" href="/jaqi.note/assets/js/36.602c739a.js"><link rel="prefetch" href="/jaqi.note/assets/js/38.5dd8d150.js"><link rel="prefetch" href="/jaqi.note/assets/js/39.a0b7df6a.js"><link rel="prefetch" href="/jaqi.note/assets/js/4.4e656f32.js"><link rel="prefetch" href="/jaqi.note/assets/js/40.54d5162d.js"><link rel="prefetch" href="/jaqi.note/assets/js/41.20face75.js"><link rel="prefetch" href="/jaqi.note/assets/js/42.ca746304.js"><link rel="prefetch" href="/jaqi.note/assets/js/43.8a9dcb5b.js"><link rel="prefetch" href="/jaqi.note/assets/js/44.45ab42be.js"><link rel="prefetch" href="/jaqi.note/assets/js/45.76555fad.js"><link rel="prefetch" href="/jaqi.note/assets/js/46.47b4f55a.js"><link rel="prefetch" href="/jaqi.note/assets/js/47.8a44f3b0.js"><link rel="prefetch" href="/jaqi.note/assets/js/48.369b86bb.js"><link rel="prefetch" href="/jaqi.note/assets/js/49.9ae0f9ed.js"><link rel="prefetch" href="/jaqi.note/assets/js/5.ebe65fd8.js"><link rel="prefetch" href="/jaqi.note/assets/js/50.3add5b2a.js"><link rel="prefetch" href="/jaqi.note/assets/js/51.365fca19.js"><link rel="prefetch" href="/jaqi.note/assets/js/52.2f29e190.js"><link rel="prefetch" href="/jaqi.note/assets/js/53.7f2804c5.js"><link rel="prefetch" href="/jaqi.note/assets/js/54.c433774d.js"><link rel="prefetch" href="/jaqi.note/assets/js/55.8c703d74.js"><link rel="prefetch" href="/jaqi.note/assets/js/56.3dd8c5d1.js"><link rel="prefetch" href="/jaqi.note/assets/js/57.812c09be.js"><link rel="prefetch" href="/jaqi.note/assets/js/58.a6f4c6fb.js"><link rel="prefetch" href="/jaqi.note/assets/js/59.308369cc.js"><link rel="prefetch" href="/jaqi.note/assets/js/6.8e5bcc75.js"><link rel="prefetch" href="/jaqi.note/assets/js/60.cba25b4e.js"><link rel="prefetch" href="/jaqi.note/assets/js/61.538da168.js"><link rel="prefetch" href="/jaqi.note/assets/js/62.044d5759.js"><link rel="prefetch" href="/jaqi.note/assets/js/63.a9b077ef.js"><link rel="prefetch" href="/jaqi.note/assets/js/64.6a1adc86.js"><link rel="prefetch" href="/jaqi.note/assets/js/65.05e3fc84.js"><link rel="prefetch" href="/jaqi.note/assets/js/66.0fed1dee.js"><link rel="prefetch" href="/jaqi.note/assets/js/67.f07b5683.js"><link rel="prefetch" href="/jaqi.note/assets/js/68.3068e0a2.js"><link rel="prefetch" href="/jaqi.note/assets/js/69.c2b3f26d.js"><link rel="prefetch" href="/jaqi.note/assets/js/7.0da0bd62.js"><link rel="prefetch" href="/jaqi.note/assets/js/70.e1c4853e.js"><link rel="prefetch" href="/jaqi.note/assets/js/71.b28da8fc.js"><link rel="prefetch" href="/jaqi.note/assets/js/72.426f621e.js"><link rel="prefetch" href="/jaqi.note/assets/js/73.edcf4ba9.js"><link rel="prefetch" href="/jaqi.note/assets/js/74.e111b23a.js"><link rel="prefetch" href="/jaqi.note/assets/js/75.8630e7ea.js"><link rel="prefetch" href="/jaqi.note/assets/js/76.ecd68f89.js"><link rel="prefetch" href="/jaqi.note/assets/js/77.e715e962.js"><link rel="prefetch" href="/jaqi.note/assets/js/78.2cc330dd.js"><link rel="prefetch" href="/jaqi.note/assets/js/79.73b537aa.js"><link rel="prefetch" href="/jaqi.note/assets/js/8.7a309ab5.js"><link rel="prefetch" href="/jaqi.note/assets/js/80.a33858aa.js"><link rel="prefetch" href="/jaqi.note/assets/js/81.85f697a5.js"><link rel="prefetch" href="/jaqi.note/assets/js/82.48491c51.js"><link rel="prefetch" href="/jaqi.note/assets/js/83.0e2ac4fb.js"><link rel="prefetch" href="/jaqi.note/assets/js/9.772ca248.js">
    <link rel="stylesheet" href="/jaqi.note/assets/css/0.styles.12fde6e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jaqi.note/" class="home-link router-link-active"><!----> <span class="site-name">jaqi.note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jaqi.note/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发文档" class="dropdown-title"><span class="title">开发文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发文档" class="mobile-dropdown-title"><span class="title">开发文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jaqi.note/frontend/" class="nav-link router-link-active">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/jaqi.note/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://jaqi.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.page
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/ljq547152849" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.csnd
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jaqi.note/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发文档" class="dropdown-title"><span class="title">开发文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发文档" class="mobile-dropdown-title"><span class="title">开发文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jaqi.note/frontend/" class="nav-link router-link-active">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/jaqi.note/other/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://jaqi.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.page
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.csdn.net/ljq547152849" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jaqi.csnd
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/jaqi.note/frontend/" class="sidebar-heading clickable router-link-active open"><span>前端</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/html/introduction/" class="sidebar-heading clickable"><span>第一章：HTML5</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/css/introduction/" class="sidebar-heading clickable"><span>第二章：CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/javascript/var/" class="sidebar-heading clickable open"><span>第三章：JavaScript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/jaqi.note/frontend/javascript/var/" class="sidebar-link">3.1 变量</a></li><li><a href="/jaqi.note/frontend/javascript/datatype/" class="sidebar-link">3.2 数据类型</a></li><li><a href="/jaqi.note/frontend/javascript/symbol/" class="sidebar-link">3.3 运算符</a></li><li><a href="/jaqi.note/frontend/javascript/control/" class="sidebar-link">3.4 控制语句</a></li><li><a href="/jaqi.note/frontend/javascript/function/" class="sidebar-link">3.5 函数</a></li><li><a href="/jaqi.note/frontend/javascript/object/" class="sidebar-link">3.6 对象</a></li><li><a href="/jaqi.note/frontend/javascript/date/" class="sidebar-link">3.7 日期和时间对象</a></li><li><a href="/jaqi.note/frontend/javascript/math/" class="sidebar-link">3.8 Math对象</a></li><li><a href="/jaqi.note/frontend/javascript/string/" class="sidebar-link">3.9 字符串对象</a></li><li><a href="/jaqi.note/frontend/javascript/BOM/" class="sidebar-link">3.10 BOM</a></li><li><a href="/jaqi.note/frontend/javascript/DOM/" class="sidebar-link">3.11 DOM</a></li><li><a href="/jaqi.note/frontend/javascript/event/" class="sidebar-link">3.12 事件</a></li><li><a href="/jaqi.note/frontend/javascript/reg/" class="sidebar-link">3.13 正则</a></li><li><a href="/jaqi.note/frontend/javascript/sync&amp;asyn/" class="sidebar-link">3.14 同步与异步</a></li><li><a href="/jaqi.note/frontend/javascript/oop/" class="sidebar-link">3.15 面向对象编程</a></li><li><a href="/jaqi.note/frontend/javascript/ECMAScript/" aria-current="page" class="active sidebar-link">3.16 ECMAScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-1-let和const命令" class="sidebar-link">3.16.1 let和const命令</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-2-变量的解构赋值" class="sidebar-link">3.16.2 变量的解构赋值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-数据的解构赋值" class="sidebar-link">1. 数据的解构赋值</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-对象的解构赋值" class="sidebar-link">2. 对象的解构赋值</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-字符串的解构赋值" class="sidebar-link">3. 字符串的解构赋值</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-数值和布尔值的解构赋值" class="sidebar-link">4. 数值和布尔值的解构赋值</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_5-函数参数的解构赋值" class="sidebar-link">5. 函数参数的解构赋值</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-3-函数扩展" class="sidebar-link">3.16.3 函数扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-length属性" class="sidebar-link">1. length属性</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-作用域" class="sidebar-link">2. 作用域</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-rest参数" class="sidebar-link">3. rest参数</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-严格模式" class="sidebar-link">4. 严格模式</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_5-name属性" class="sidebar-link">5. name属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-4-字符串扩展" class="sidebar-link">3.16.4 字符串扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-for-of方法遍历字符串" class="sidebar-link">1. for...of方法遍历字符串</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-模板字符串" class="sidebar-link">2. 模板字符串</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-模板标签" class="sidebar-link">3. 模板标签</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-includes-startswith-endswith" class="sidebar-link">4. includes/startsWith/endsWith</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_5-repeat" class="sidebar-link">5. repeat</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_6-padstart-padend" class="sidebar-link">6. padStart/padEnd</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_7-trimstart-trimend" class="sidebar-link">7. trimStart/trimEnd</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_8-matchall" class="sidebar-link">8. matchAll</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_9-replaceall" class="sidebar-link">9. replaceAll</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-5-数值扩展" class="sidebar-link">3.16.5 数值扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-isfinite-isnan" class="sidebar-link">1. isFinite/isNaN</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-parseint-parsefloat" class="sidebar-link">2. parseInt/parseFloat</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-isinteger" class="sidebar-link">3. isInteger</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-epsilon" class="sidebar-link">4. EPSILON</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-6-math扩展" class="sidebar-link">3.16.6 Math扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-math去除小数部分" class="sidebar-link">1. Math去除小数部分</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-sign判断一个数的底数" class="sidebar-link">2. sign判断一个数的底数</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-cbrt计算一个数的立方根" class="sidebar-link">3. cbrt计算一个数的立方根</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-cbrt计算所有参数的平方和的平方根" class="sidebar-link">4. cbrt计算所有参数的平方和的平方根</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-7-数组扩展" class="sidebar-link">3.16.7 数组扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-扩展运算符" class="sidebar-link">1. 扩展运算符...</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-from" class="sidebar-link">2. from</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-of" class="sidebar-link">3. of</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-copywithin" class="sidebar-link">4. copyWithin</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_5-find-findindex" class="sidebar-link">5. find/findIndex</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_6-fill" class="sidebar-link">6. fill</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_7-entries-keys-values" class="sidebar-link">7.  entries/keys/values</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_8-includes" class="sidebar-link">8. includes</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_9-flat-flatmap" class="sidebar-link">9. flat/flatMap</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-8-对象扩展" class="sidebar-link">3.16.8 对象扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_1-属性的简洁表示法" class="sidebar-link">1. 属性的简洁表示法</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_2-属性名表达式" class="sidebar-link">2. 属性名表达式</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-name属性" class="sidebar-link">3. name属性</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_4-可枚举性" class="sidebar-link">4. 可枚举性</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_5-属性的遍历" class="sidebar-link">5. 属性的遍历</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_6-super关键字" class="sidebar-link">6. super关键字</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_7-对象的扩展运算符-详见数组的扩展" class="sidebar-link">7. 对象的扩展运算符 详见数组的扩展</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_8-链判断运算符" class="sidebar-link">8. ?.链判断运算符</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_9-null判断运算符" class="sidebar-link">9. ??Null判断运算符</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_10-object-is" class="sidebar-link">10. Object.is</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_11-object-assign" class="sidebar-link">11. Object.assign</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_12-object-getownpropertydescriptors" class="sidebar-link">12. Object.getOwnPropertyDescriptors</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_13-proto-属性和object-setprototypeof-object-getprototypeof方法" class="sidebar-link">13.  __proto__属性和Object.setPrototypeOf/Object.getPrototypeOf方法</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_14-object-keys-object-values-object-entries-object-fromentries" class="sidebar-link">14.  Object.keys/Object.values/Object.entries/Object.fromEntries</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-9-symbol" class="sidebar-link">3.16.9 Symbol</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-10-set与map" class="sidebar-link">3.16.10 Set与Map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#map" class="sidebar-link">Map</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-11-proxy" class="sidebar-link">3.16.11 proxy</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-12-reflect" class="sidebar-link">3.16.12 Reflect</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-13-promise" class="sidebar-link">3.16.13 Promise</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-14-iterator和for-of循环" class="sidebar-link">3.16.14 Iterator和for...of循环</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-15-iterator" class="sidebar-link">3.16.15 Iterator</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-16-for-of" class="sidebar-link">3.16.16 for...of</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-17-generator" class="sidebar-link">3.16.17 Generator</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-18-async" class="sidebar-link">3.16.18 async</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-19-class" class="sidebar-link">3.16.19 Class</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-20-es6-module" class="sidebar-link">3.16.20 ES6 Module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#export" class="sidebar-link">export</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#import" class="sidebar-link">import</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#export-default" class="sidebar-link">export default</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#export与import的复合写法" class="sidebar-link">export与import的复合写法</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#模块的继承" class="sidebar-link">模块的继承</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#跨模块常量" class="sidebar-link">跨模块常量</a></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#module的加载实现" class="sidebar-link">Module的加载实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/jaqi.note/frontend/javascript/ECMAScript/#_3-16-21-风格规范" class="sidebar-link">3.16.21  风格规范</a></li></ul></li><li><a href="/jaqi.note/frontend/javascript/TypeScript/" class="sidebar-link">3.17 TypeScript</a></li></ul></section></li><li><a href="/jaqi.note/frontend/jquery/" class="sidebar-link">第四章：jQuery</a></li><li><a href="/jaqi.note/frontend/ajax/" class="sidebar-link">第五章：ajax</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/jaqi.note/frontend/vue/introduction/" class="sidebar-heading clickable"><span>第六章：vue.js</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/jaqi.note/frontend/webpack/" class="sidebar-link">第七章：webpack</a></li><li><a href="/jaqi.note/frontend/miniprogram/" class="sidebar-link">第八章：小程序</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_3-16-1-let和const命令"><a href="#_3-16-1-let和const命令" class="header-anchor">#</a> 3.16.1 <code>let</code>和<code>const</code>命令</h2> <p><code>let</code>声明的变量不存在预解析，不存在变量提升，同一作用域不允许重复声明，只能在块内访问。<br> <code>const</code>用于声明常量，值不可以改变，不存在预解析，必须初始化（直接赋值），同一作用域不允许重复声明，只能在块内访问。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li>块级作用域：<code>if</code>/<code>else</code>/<code>for</code>，由<code>{}</code>包括起来的部分。</li> <li><code>const</code>指向的地址不可以改变，但是指向的数据结构是可以改变的。可以使用<code>Object.freeze</code>冻结指向的对象。</li> <li><code>let</code>/<code>const</code>声明的变量不属于顶层对象的属性。</li> <li><font color="red">*</font>ES2020新增<code>globalThis</code>可以在任何环境下获取顶层对象。</li></ol></div> <p>块级作用域的优点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 5 5 5 5 5</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 0 1 2 3 4</span>

<span class="token comment">// 通过闭包实现</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 0 1 2 3 4</span>
</code></pre></div><h2 id="_3-16-2-变量的解构赋值"><a href="#_3-16-2-变量的解构赋值" class="header-anchor">#</a> 3.16.2 变量的解构赋值</h2> <p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构</p> <h3 id="_1-数据的解构赋值"><a href="#_1-数据的解构赋值" class="header-anchor">#</a> 1. 数据的解构赋值</h3> <p><code>=</code>号右侧必须是数组，根据数据顺序一一对应，如果解构不成功，变量的值就等于undefined。</p> <blockquote><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// a = 1 b = 2 c = 3</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token punctuation">,</span> baz<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// foo = 1 bar = 2 baz = 3</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>head<span class="token punctuation">,</span> <span class="token operator">...</span>tail<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// head = 1  tail = [2, 3, 4]</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// x =1 y = 2</span>
</code></pre></div><ul><li>默认值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>     <span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 给y设置默认值 x='a', y='b'</span>
</code></pre></div></blockquote> <h3 id="_2-对象的解构赋值"><a href="#_2-对象的解构赋值" class="header-anchor">#</a> 2. 对象的解构赋值</h3> <p><code>=</code>号右侧必须是对象，根据key一一对应，如果解构不成功，变量的值就等于undefined。</p> <blockquote><div class="language-js extra-class"><pre class="language-js"><code>   <span class="token keyword">let</span> <span class="token punctuation">{</span> bar<span class="token punctuation">,</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// bar = aaa foo = bbb</span>
   <span class="token keyword">let</span> <span class="token punctuation">{</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// baz = undefined</span>
   <span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li>默认值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>     <span class="token keyword">let</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 给y设置默认值 x=1, y=5</span>
</code></pre></div><ul><li>别名</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 给baz设置别名foo baz = aaa  </span>
<span class="token comment">// foo = error: foo is not defined 真正被赋值的是变量baz，而不是别名foo。</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li>嵌套结构的对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">p</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token string">'World'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">p</span><span class="token operator">:</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">// x = &quot;Hello&quot; y =  &quot;World&quot;  </span>
<span class="token comment">// 通过别名s接收</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">p</span><span class="token operator">:</span>s<span class="token punctuation">,</span> <span class="token literal-property property">p</span><span class="token operator">:</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> 
<span class="token comment">// x = &quot;Hello&quot; y = &quot;World&quot;  </span>
<span class="token comment">// 第一个p是表示赋值给p, 第二个p 表示obj里面的p对象</span>
<span class="token comment">// p = [&quot;Hello&quot;, {y: &quot;World&quot;}] s = [&quot;Hello&quot;, {y: &quot;World&quot;}]</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">p</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token string">'Hello'</span><span class="token punctuation">,</span><span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token string">'World'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>p<span class="token punctuation">,</span><span class="token literal-property property">p</span><span class="token operator">:</span><span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> obj   <span class="token comment">// p = {x: &quot;Hello&quot;, y: &quot;World&quot;}</span>
<span class="token comment">// 通过别名s接收</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">p</span><span class="token operator">:</span>s<span class="token punctuation">,</span><span class="token literal-property property">p</span><span class="token operator">:</span><span class="token punctuation">{</span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> obj   <span class="token comment">// p = {x: &quot;Hello&quot;, y: &quot;World&quot;} s = {x: &quot;Hello&quot;, y: &quot;World&quot;}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>如果要将一个已经声明的变量用于解构赋值,需要将整个解构赋值语句，放在一个圆括号里面。</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">let</span> x<span class="token punctuation">;</span>
<span class="token comment">// 错误的写法 </span>
<span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 正确的写法</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></blockquote> <h3 id="_3-字符串的解构赋值"><a href="#_3-字符串的解构赋值" class="header-anchor">#</a> 3. 字符串的解构赋值</h3> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello'</span> <span class="token comment">// a = &quot;h&quot; b = &quot;e&quot; c = &quot;l&quot; d = &quot;l&quot; e = &quot;o&quot;</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">length</span> <span class="token operator">:</span> len<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span> <span class="token comment">// len = 5</span>
</code></pre></div><h3 id="_4-数值和布尔值的解构赋值"><a href="#_4-数值和布尔值的解构赋值" class="header-anchor">#</a> 4. 数值和布尔值的解构赋值</h3> <p>解构赋值时，如果等号右边是数值和布尔值，则会先转为对象。</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">toString</span><span class="token operator">:</span> s<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
    s <span class="token operator">===</span> <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token comment">// true</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>数值和布尔值的包装对象都有toString属性，因此变量都能取到值。
由于undefined和null无法转为对象，所以对它们进行解构赋值，都会报错。</p></div> <h3 id="_5-函数参数的解构赋值"><a href="#_5-函数参数的解构赋值" class="header-anchor">#</a> 5. 函数参数的解构赋值</h3> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [ 3, 7 ]</span>
</code></pre></div><ul><li>默认值</li></ul> <ol><li>写法一：函数参数的默认值是空对象，但是设置了对象解构赋值的默认值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 0]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
</code></pre></div><ol start="2"><li>写法二：函数参数的默认值是一个有具体属性的对象，但是没有设置对象解构赋值的默认值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 8]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, undefined]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [undefined, undefined]</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0]</span>
</code></pre></div><ul><li>参数默认值的位置：通常情况下，定义了默认值的参数，应该是函数的尾参数，否则不能省略默认值前面的参数。</li></ul></blockquote> <h2 id="_3-16-3-函数扩展"><a href="#_3-16-3-函数扩展" class="header-anchor">#</a> 3.16.3 函数扩展</h2> <h3 id="_1-length属性"><a href="#_1-length属性" class="header-anchor">#</a> 1. <code>length</code>属性</h3> <p>只会返回没有设置默认值的参数的长度。</p> <h3 id="_2-作用域"><a href="#_2-作用域" class="header-anchor">#</a> 2. 作用域</h3> <p>如果设置了默认值参数，则赋值语句本事会形成一个单独的作用域。如果作用域内未定义则查找全局参数，否则提示未定义。</p> <h3 id="_3-rest参数"><a href="#_3-rest参数" class="header-anchor">#</a> 3. <code>rest</code>参数</h3> <p>用于获取函数的多余参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> rest<span class="token punctuation">;</span>  <span class="token comment">// [1,2,3,4,5]</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-严格模式"><a href="#_4-严格模式" class="header-anchor">#</a> 4. 严格模式</h3> <p>ES6规定只要函数参数使用了默认值、解构赋值、或者扩展运算符，那么函数内部就不能设定为严格模式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span> <span class="token comment">// 设置为严格模式</span>
<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b <span class="token operator">=</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 方法内部正常模式，不能在方法内设置use strict</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li>消除Javascript语法的一些不合理、不严谨之处，减少一些怪异行为。</li> <li>消除代码运行的一些不安全之处，保证代码运行的安全。</li> <li>提高编译器效率，增加运行速度。</li> <li>为未来新版本的Javascript做好铺垫。</li></ol></div> <h3 id="_5-name属性"><a href="#_5-name属性" class="header-anchor">#</a> 5. <code>name</code>属性</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>name  <span class="token comment">// fn</span>
f<span class="token punctuation">.</span>name <span class="token comment">// 匿名函数赋值给变量 ES5 =&gt; &quot;&quot;  ES6 =&gt; fn </span>
</code></pre></div><ul><li>箭头函数:使用<code>=&gt;</code>定义函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v
<span class="token comment">//等同于</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li>如果不需要参数或需要多个参数，就使用一个圆括号代表参数部分。</li> <li>如果箭头函数直接返回一个对象，必须在对象外面加上括号，否则会报错。</li> <li>箭头函数内的<code>this</code>指向定义时所在作用域链上一层的<code>this</code></li> <li>箭头函数不可以当做构造函数，不可以使用<code>new</code>命令</li> <li>箭头函数不可以使用<code>arguments</code>对象</li> <li>箭头函数不可以使用<code>yield</code>命令，因此箭头函数不能用作 Generator 函数。</li> <li>给对象的属性定义方法时，不建议使用箭头函数，此时的箭头函数this指向全局。</li> <li></li></ol></div> <ul><li>尾调用优化:删除调用尾调用方法的方法的调用帧，只要严格模式模式下有效。
尾调用：指某个函数的最后一步是调用另一个函数。<code>return</code>后调用另一个方法</li> <li>尾递归优化:只保留一个调用记录，只要严格模式模式下有效。
尾递归：指某个函数的最后一步是调用函数自己。<code>return</code>后调用自己</li></ul> <p>箭头函数的作用域详见<a href="/jaqi.note/frontend/javascript/function/#_3-5-5-函数上下文与this关键字">3.5.5</a></p> <h2 id="_3-16-4-字符串扩展"><a href="#_3-16-4-字符串扩展" class="header-anchor">#</a> 3.16.4 字符串扩展</h2> <h3 id="_1-for-of方法遍历字符串"><a href="#_1-for-of方法遍历字符串" class="header-anchor">#</a> 1. <code>for...of</code>方法遍历字符串</h3> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> codePoint <span class="token keyword">of</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>codePoint<span class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token comment">// &quot;f&quot; &quot;o&quot; &quot;o&quot;</span>
</code></pre></div></blockquote> <h3 id="_2-模板字符串"><a href="#_2-模板字符串" class="header-anchor">#</a> 2. 模板字符串</h3> <blockquote><p>通过反引号包裹字符串，${}可以放入任意的JavaScript表达式，可以进行运算，以及引用对象属性还可以调用函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, how are you </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>如果模板内字符串需要输出反引号，则序号反斜杠转译`</li> <li>模板字符串内的所有空格和缩进都会保留，如果不想保留可以使用<code>trim</code>去除</li></ul></div></blockquote> <h3 id="_3-模板标签"><a href="#_3-模板标签" class="header-anchor">#</a> 3. 模板标签</h3> <blockquote><p>把模板设置成一个方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, how are you </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
<span class="token comment">// 等同于</span>
Hello<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, how are you </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span> 
</code></pre></div></blockquote> <h3 id="_4-includes-startswith-endswith"><a href="#_4-includes-startswith-endswith" class="header-anchor">#</a> 4. <code>includes</code>/<code>startsWith</code>/<code>endsWith</code></h3> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">'Hello world!'</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span> <span class="token comment">// true 指定字符串是否在首位</span>
s<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span> <span class="token comment">// true  指定字符串是否在尾部</span>
s<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span> <span class="token comment">// true  是否含有指定字符串</span>
</code></pre></div></blockquote> <h3 id="_5-repeat"><a href="#_5-repeat" class="header-anchor">#</a> 5. <code>repeat</code></h3> <blockquote><p>将原字符串重复n次,如果是小数，向下取整，不可以是负数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// &quot;xxx&quot;</span>
<span class="token string">'hello'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hellohello&quot;</span>
<span class="token string">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// &quot;&quot;</span>
</code></pre></div></blockquote> <h3 id="_6-padstart-padend"><a href="#_6-padstart-padend" class="header-anchor">#</a> 6. <code>padStart</code>/<code>padEnd</code></h3> <blockquote><p><font color="red">*</font>ES2017新增：<code>padStart</code>用于头部补全，<code>padEnd</code>()`用于尾部补全。第一个参数是字符串补全生效的最大长度，第二个参数是用来补全的字符串。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'ababx' 头部用ab补全，补全后为5位</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xabab' 尾部用ab补全，补全后为5位</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>如果原字符串的长度，等于或大于最大长度，则字符串补全不生效，返回原字符串。</li> <li>如果用来补全的字符串与原字符串，两者的长度之和超过了最大长度，则会截去超出位数的补全字符串。</li> <li>如果省略第二个字符串，则默认使用空格补全。</li></ul></div></blockquote> <h3 id="_7-trimstart-trimend"><a href="#_7-trimstart-trimend" class="header-anchor">#</a> 7. <code>trimStart</code>/<code>trimEnd</code></h3> <blockquote><p><font color="red">*ES2019新增：</font><code>trimStart</code>消除字符串头部的空格，<code>trimEnd</code>消除尾部的空格,不改变原字符串</p></blockquote> <h3 id="_8-matchall"><a href="#_8-matchall" class="header-anchor">#</a> 8. <code>matchAll</code></h3> <blockquote><p>方法返回一个正则表达式在当前字符串的所有匹配</p></blockquote> <h3 id="_9-replaceall"><a href="#_9-replaceall" class="header-anchor">#</a> 9. <code>replaceAll</code></h3> <blockquote><p><font color="red">*ES2021新增：</font>一次性替换所有匹配，正则必须配置全局匹配<code>g</code>。</p> <ul><li><code>$&amp;</code>匹配的字符串</li> <li>$`匹配结果前面的字符串</li> <li><code>$'</code> 匹配结果后面的字符串+</li> <li><code>$n</code>匹配的第N组数据，n从1开始。这个参数生效的前提是，第一个参数必须是正则表达式。</li> <li><code>$$</code>表示美元符号</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// $&amp; 表示匹配的字符串，即`b`本身</span>
<span class="token string">'abbc'</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'$&amp;'</span><span class="token punctuation">)</span> <span class="token comment">// abbc</span>
<span class="token comment">// $` 表示匹配结果之前的字符串</span>
<span class="token comment">// 对于第一个`b`，$` 指代`a`</span>
<span class="token comment">// 对于第二个`b`，$` 指代`ab`</span>
<span class="token string">'abbc'</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'$`'</span><span class="token punctuation">)</span> <span class="token comment">// 'aaabc'</span>
<span class="token comment">// $' 表示匹配结果之后的字符串</span>
<span class="token comment">// 对于第一个`b`，$' 指代`bc`</span>
<span class="token comment">// 对于第二个`b`，$' 指代`c`</span>
<span class="token string">'abbc'</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// 'abccc'</span>
<span class="token comment">// $1 表示正则表达式的第一个组匹配，指代`ab`</span>
<span class="token comment">// $2 表示正则表达式的第二个组匹配，指代`bc`</span>
<span class="token string">'abbc'</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(ab)(bc)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'$2$1'</span><span class="token punctuation">)</span><span class="token comment">// 'bcab'</span>
<span class="token comment">// $$ 指代 $</span>
<span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'$$'</span><span class="token punctuation">)</span><span class="token comment">// 'a$c'</span>
</code></pre></div></blockquote> <h2 id="_3-16-5-数值扩展"><a href="#_3-16-5-数值扩展" class="header-anchor">#</a> 3.16.5 数值扩展</h2> <h3 id="_1-isfinite-isnan"><a href="#_1-isfinite-isnan" class="header-anchor">#</a> 1. <code>isFinite</code>/<code>isNaN</code></h3> <blockquote><p>Number.isFinite()检测数值是否有限，Number.isNaN检测数值是否为NaN</p></blockquote> <h3 id="_2-parseint-parsefloat"><a href="#_2-parseint-parsefloat" class="header-anchor">#</a> 2. <code>parseInt</code>/<code>parseFloat</code></h3> <h3 id="_3-isinteger"><a href="#_3-isinteger" class="header-anchor">#</a> 3. <code>isInteger</code></h3> <blockquote><p>判断是否为整数</p></blockquote> <h3 id="_4-epsilon"><a href="#_4-epsilon" class="header-anchor">#</a> 4. <code>EPSILON</code></h3> <blockquote><p>生成一个极小的常量，常用语设置误差范围</p></blockquote> <h2 id="_3-16-6-math扩展"><a href="#_3-16-6-math扩展" class="header-anchor">#</a> 3.16.6 Math扩展</h2> <h3 id="_1-math去除小数部分"><a href="#_1-math去除小数部分" class="header-anchor">#</a> 1. <code>Math</code>去除小数部分</h3> <h3 id="_2-sign判断一个数的底数"><a href="#_2-sign判断一个数的底数" class="header-anchor">#</a> 2. <code>sign</code>判断一个数的底数</h3> <h3 id="_3-cbrt计算一个数的立方根"><a href="#_3-cbrt计算一个数的立方根" class="header-anchor">#</a> 3. <code>cbrt</code>计算一个数的立方根</h3> <h3 id="_4-cbrt计算所有参数的平方和的平方根"><a href="#_4-cbrt计算所有参数的平方和的平方根" class="header-anchor">#</a> 4. <code>cbrt</code>计算所有参数的平方和的平方根</h3> <h2 id="_3-16-7-数组扩展"><a href="#_3-16-7-数组扩展" class="header-anchor">#</a> 3.16.7 数组扩展</h2> <h3 id="_1-扩展运算符"><a href="#_1-扩展运算符" class="header-anchor">#</a> 1. 扩展运算符<code>...</code></h3> <p>将一个数组转为用逗号分隔的参数序列</p> <blockquote><ul><li>数组合并</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>arr1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// push方法的参数不可以是数组，所以通过扩展运算符拆分在参数序列插入arr1数组</span>
</code></pre></div><ul><li>深拷贝</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>arr1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>配合解构赋值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//  first = 1    rest = [2, 3, 4, 5] </span>
</code></pre></div><ul><li>字符串转数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token operator">...</span><span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token comment">// 字符串转数组 [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span>
</code></pre></div><ul><li>遍历器（Iterator）转数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> nodeList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>nodeList<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Map 和 Set 结构，Generator 函数</li></ul></blockquote> <h3 id="_2-from"><a href="#_2-from" class="header-anchor">#</a> 2. <code>from</code></h3> <blockquote><p>将类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（iterable）的对象（包括 ES6 新增的数据结构 Set 和 Map）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="_3-of"><a href="#_3-of" class="header-anchor">#</a> 3. <code>of</code></h3> <blockquote><p>将一组值，转换为数组</p> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">// [3,11,8]</span>
</code></pre></div></blockquote> <h3 id="_4-copywithin"><a href="#_4-copywithin" class="header-anchor">#</a> 4. <code>copyWithin</code></h3> <blockquote><p>在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。也就是说，使用这个方法，会修改当前数组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// [4, 5, 3, 4, 5]</span>
</code></pre></div><p>第一个参数：从该位置开始替换数据。如果为负值，表示倒数。
第二个参数：从该位置开始读取数据，默认为 0。如果为负值，表示从末尾开始计算。
第三个参数：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示从末尾开始计算。</p></blockquote> <h3 id="_5-find-findindex"><a href="#_5-find-findindex" class="header-anchor">#</a> 5. <code>find</code>/<code>findIndex</code></h3> <blockquote><p><code>find</code>/<code>findIndex</code>找出第一个符合条件的数组成员。<code>find</code>返回找到的第一个元素，<code>findIndex</code>返回找到的第一个元素的索引</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token operator">&gt;</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// 找到大于10的数</span>
</code></pre></div><h3 id="_6-fill"><a href="#_6-fill" class="header-anchor">#</a> 6. <code>fill</code></h3> <blockquote><p>使用给定值填充数组,第一个参数是要填充的值，第二个参数是起始位置，第三个参数是结束位置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>  <span class="token comment">// [7, 7, 7]</span>
<span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>  <span class="token comment">// [7, 7, 7]</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// ['a', 7, 'c']</span>
</code></pre></div></blockquote> <h3 id="_7-entries-keys-values"><a href="#_7-entries-keys-values" class="header-anchor">#</a> 7.  <code>entries</code>/<code>keys</code>/<code>values</code></h3> <blockquote><p>用于遍历数组。它们都返回一个遍历器对象（Iterator），可以用<code>for...of</code>循环进行遍历，唯一的区别是<code>keys</code>是对键名的遍历、<code>values</code>是对键值的遍历，<code>entries</code>是对键值对的遍历。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0  1</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> elem <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 'a'  'b'</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0 &quot;a&quot;  1 &quot;b&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <h3 id="_8-includes"><a href="#_8-includes" class="header-anchor">#</a> 8. <code>includes</code></h3> <blockquote><p>表示某个数组是否包含给定的值，与字符串的indexof方法类似.第一个参数是给定的值，第二个参数是起始位置，负数倒序。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>     <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>     <span class="token comment">// false</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_9-flat-flatmap"><a href="#_9-flat-flatmap" class="header-anchor">#</a> 9. <code>flat</code>/<code>flatMap</code></h3> <blockquote><p><code>flat</code>将嵌套的数组“拉平”,参数表示拉平的层数，默认为1，Infinity表示全部拉平。<br> <code>flatMap</code>对原数组的每个成员执行一个函数.并返回一个新的拉平数组，但是只能“拉平”一层。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// [[2], [4], [6], [8]]</span>
</code></pre></div></blockquote> <h2 id="_3-16-8-对象扩展"><a href="#_3-16-8-对象扩展" class="header-anchor">#</a> 3.16.8 对象扩展</h2> <h3 id="_1-属性的简洁表示法"><a href="#_1-属性的简洁表示法" class="header-anchor">#</a> 1. 属性的简洁表示法</h3> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span>foo<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// 等同于   baz = {foo: foo};</span>
</code></pre></div></blockquote> <h3 id="_2-属性名表达式"><a href="#_2-属性名表达式" class="header-anchor">#</a> 2. 属性名表达式</h3> <blockquote><div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">[</span><span class="token string">'a'</span> <span class="token operator">+</span> <span class="token string">'bc'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment">// obj.abc = 123</span>
</code></pre></div></blockquote> <h3 id="_3-name属性"><a href="#_3-name属性" class="header-anchor">#</a> 3. <code>name</code>属性</h3> <blockquote><p>对象也是方法，<code>name</code>属性返回方法名。如果对象的方法使用了取值函数（getter）和存值函数（setter），在<code>name</code>前加<code>get</code>和<code>set</code></p></blockquote> <h3 id="_4-可枚举性"><a href="#_4-可枚举性" class="header-anchor">#</a> 4. 可枚举性</h3> <blockquote><p>对象的每个属性都有一个描述对象（Descriptor），用来控制该属性的行为。<code>getOwnPropertyDescriptor</code>方法可以获取该属性的描述对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">//  {</span>
<span class="token comment">//    value: 123,  属性值</span>
<span class="token comment">//    writable: true, </span>
<span class="token comment">//    enumerable: true, 是否可枚举</span>
<span class="token comment">//    configurable: true</span>
<span class="token comment">//  }</span>
</code></pre></div><p>描述对象的enumerable属性，称为“可枚举性”，如果该属性为false，就表示某些操作会忽略当前属性。
目前，有四个操作会忽略enumerable为false的属性。</p> <blockquote><p><code>for/in</code>：只遍历对象自身的和继承的可枚举的属性。
<code>Object.keys</code>：返回对象自身的所有可枚举的属性的键名。
<code>JSON.stringify</code>：只串行化对象自身的可枚举的属性。
<code>Object.assign</code>： 忽略enumerable为false的属性，只拷贝对象自身的可枚举的属性。
这四个操作之中，前三个是 ES5 就有的，最后一个<code>Object.assign</code>是 ES6 新增的。其中，只有<code>for/in</code>会返回继承的属性，其他三个方法都会忽略继承的属性，只处理对象自身的属性。实际上，引入“可枚举”（enumerable）这个概念的最初目的，就是让某些属性可以规避掉<code>for/in</code>操作，不然所有内部属性和方法都会被遍历到。比如，对象原型的toString方法，以及数组的length属性，就通过“可枚举性”，从而避免被for...in遍历到。</p></blockquote></blockquote> <h3 id="_5-属性的遍历"><a href="#_5-属性的遍历" class="header-anchor">#</a> 5. 属性的遍历</h3> <blockquote><ul><li><code>for/in</code>循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）。</li> <li><code>Object.keys(obj)</code>返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）的键名</li> <li><code>Object.getOwnPropertyNames(obj)</code>返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）的键名。</li> <li><code>Object.getOwnPropertySymbols(obj)</code>返回一个数组，包含对象自身的所有 Symbol 属性的键名。</li> <li><code>Reflect.ownKeys(obj)</code>返回一个数组，包含对象自身的（不含继承的）所有键名，不管键名是 Symbol 或&gt; 字符串，也不管是否可枚举。</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>首先遍历所有数值键，按照数值升序排列。
其次遍历所有字符串键，按照加入时间升序排列。
最后遍历所有 Symbol 键，按照加入时间升序排列。</p></div></blockquote> <h3 id="_6-super关键字"><a href="#_6-super关键字" class="header-anchor">#</a> 6. <code>super</code>关键字</h3> <p>指向当前对象的原型对象,只能用在对象方法之中。</p> <div class="language-js extra-class"><pre class="language-js"><code>onst proto <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'hello'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
  <span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hello&quot;</span>
</code></pre></div><p>JavaScript引擎内部，super.foo等同于Object.getPrototypeOf(this).foo（属性）或Object.getPrototypeOf(this).foo.call(this)（方法）。</p> <p>const proto = {</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo <span class="token comment">// 报错 super用在了属性里</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo <span class="token comment">// 报错 super用在了函数里</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo <span class="token comment">// 报错 super用在了函数里</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-对象的扩展运算符-详见数组的扩展"><a href="#_7-对象的扩展运算符-详见数组的扩展" class="header-anchor">#</a> 7. 对象的扩展运算符 详见数组的扩展</h3> <h3 id="_8-链判断运算符"><a href="#_8-链判断运算符" class="header-anchor">#</a> 8. <code>?.</code>链判断运算符</h3> <blockquote><p><font color="red">*</font>ES2020新增：<code>?.</code>链判断运算符
如果读取对象内部的某个属性，往往需要判断一下该对象是否存在。比如，要读取message.body.user.firstName，安全的写法是写成下面这样。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 错误的写法</span>
<span class="token keyword">const</span>  firstName <span class="token operator">=</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">;</span>

<span class="token comment">// 正确的写法</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token punctuation">(</span>message
  <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body
  <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user
  <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
 <span class="token comment">// 使用链判断运算符写法</span>
 <span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token operator">?.</span>body<span class="token operator">?.</span>user<span class="token operator">?.</span>firstName <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h3 id="_9-null判断运算符"><a href="#_9-null判断运算符" class="header-anchor">#</a> 9. <code>??</code>Null判断运算符</h3> <blockquote><p><font color="red">*</font>ES2020新增：<code>??</code>Null判断运算符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果firstName的值是false或0，default会生效</span>
 <span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token operator">?.</span>body<span class="token operator">?.</span>user<span class="token operator">?.</span>firstName <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>  
<span class="token comment">// firstName的值是null或undefined，default才会生效</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token operator">?.</span>body<span class="token operator">?.</span>user<span class="token operator">?.</span>firstName <span class="token operator">??</span> <span class="token string">'default'</span><span class="token punctuation">;</span>  
</code></pre></div></blockquote> <h3 id="_10-object-is"><a href="#_10-object-is" class="header-anchor">#</a> 10. <code>Object.is</code></h3> <blockquote><p>判断是否同值相等</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></blockquote> <h3 id="_11-object-assign"><a href="#_11-object-assign" class="header-anchor">#</a> 11. <code>Object.assign</code></h3> <blockquote><p>将源对象的所有可枚举属性属性合并。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>source1<span class="token punctuation">,</span>source2<span class="token punctuation">,</span>source3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>如果属性同名则后面的覆盖前面的,因此嵌套对象会执行覆盖而不是插入，因此不能处理嵌套对象。
该方法为浅拷贝。</p></div></blockquote> <h3 id="_12-object-getownpropertydescriptors"><a href="#_12-object-getownpropertydescriptors" class="header-anchor">#</a> 12. <code>Object.getOwnPropertyDescriptors</code></h3> <blockquote><p>ES5：<code>getOwnPropertyDescriptor</code>返回某个对象属性的描述对象。<br> <font color="red">*</font>ES2017：<code>getOwnPropertyDescriptors</code>返回指定对象所有自身属性（非继承属性）的描述对象。<br>
该方法的引入目的，主要是为了解决Object.assign()无法正确拷贝get属性和set属性的问题。Object。assign方法总是拷贝一个属性的值，而不会拷贝它背后的赋值方法或取值方法。</p></blockquote> <h3 id="_13-proto-属性和object-setprototypeof-object-getprototypeof方法"><a href="#_13-proto-属性和object-setprototypeof-object-getprototypeof方法" class="header-anchor">#</a> 13. <code>__proto__</code>属性和<code>Object.setPrototypeOf</code>/<code>Object.getPrototypeOf</code>方法</h3> <blockquote><p><code>__proto__</code>属性：用来读取或设置当前对象的原型对象。出于兼容性考虑建议使用一下方法操作原型对象。<br> <code>Object.setPrototypeOf</code>方法用于设置一个对象的原型对象，返回参数对象本身。<br> <code>Object.setPrototypeOf</code>方法用于读取一个对象的原型对象。</p></blockquote> <h3 id="_14-object-keys-object-values-object-entries-object-fromentries"><a href="#_14-object-keys-object-values-object-entries-object-fromentries" class="header-anchor">#</a> 14.  <code>Object.keys</code>/<code>Object.values</code>/<code>Object.entries</code>/<code>Object.fromEntries</code></h3> <blockquote><p><code>Object.keys</code>返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumerable）属性的键名。<br> <font color="red">*</font>ES2017：<code>Object.values</code>返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumerable）属性的键值。<br> <code>Object.entries</code>返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumerable）属性的键值对数组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token literal-property property">baz</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [&quot;foo&quot;, &quot;baz&quot;]</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [&quot;bar&quot;, 42]  </span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [ [&quot;foo&quot;, &quot;bar&quot;], [&quot;baz&quot;, 42] ]</span>
</code></pre></div><p><code>Object.fromEntries</code>是<code>Object.entries</code>的逆操作，用于将一个键值对数组转为对象。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div></blockquote> <h2 id="_3-16-9-symbol"><a href="#_3-16-9-symbol" class="header-anchor">#</a> 3.16.9 Symbol</h2> <p>ES5的对象属性名都是字符串，这容易造成属性名的冲突。<br>
ES6引入了一种新的原始数据类型Symbol，表示独一无二的值。它是JavaScript语言的第七种数据类型，前六种是：undefined、null、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。<br> <code>Symbol</code>值通过<code>Symbol</code>函数生成。这就是说，对象的属性名现在可以有两种类型，一种是原来就有的字符串，另一种就是新增的<code>Symbol</code>类型。凡是属性名属于<code>Symbol</code>类型，就都是独一无二的，可以保证不会与其他属性名产生冲突。</p> <ol><li>如果不加参数，它们在控制台的输出都是Symbol()</li> <li>Symbol函数的参数只是表示对当前Symbol值的描述，因此相同参数的Symbol函数的返回值是不相等的。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 没有参数的情况</span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// s1 = Symbol()</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// s2 = Symbol()</span>

s1 <span class="token operator">===</span> s2 <span class="token comment">// false</span>

<span class="token comment">// 有参数的情况</span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// s1 = Symbol(foo)</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  s2 = Symbol(foo)</span>

s1 <span class="token operator">===</span> s2 <span class="token comment">// false</span>
</code></pre></div><ol start="3"><li>Symbol值不能与其他类型的值进行运算,但是，Symbol值可以显式转为字符串也可以转为布尔值，但是不能转为数值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'My symbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">String</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token comment">// 'Symbol(My symbol)'</span>
sym<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Symbol(My symbol)'</span>
</code></pre></div><h2 id="_3-16-10-set与map"><a href="#_3-16-10-set与map" class="header-anchor">#</a> 3.16.10 Set与Map</h2> <h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <p>ES6 提供了新的数据结构 Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。</p> <p>set方法:</p> <blockquote><p><code>add</code>:添加某个值，返回Set对象本身<br> <code>clear</code>:删除所有的键/值对，没有返回值<br> <code>delete</code>:删除某个键，返回true。如果删除失败，返回false<br> <code>forEach</code>:对每个元素执行指定操作<br> <code>has</code>:返回一个布尔值，表示某个键是否在当前 Set 对象之中</p></blockquote> <ol><li>用来数组，字符串去重</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token string">&quot;1234555555&quot;</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>用来数组，字符串并集</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> union <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">,</span> <span class="token operator">...</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {1, 2, 3, 4}</span>
</code></pre></div><ol start="3"><li>用来数组，字符串交集</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> intersect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {2, 3}</span>
</code></pre></div><ol start="4"><li>用来数组，字符串差集</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> difference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>b<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {1}</span>
</code></pre></div><h3 id="map"><a href="#map" class="header-anchor">#</a> Map</h3> <p>Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应</p> <ol><li><code>size</code>返回总成员数</li> <li><code>has</code>判断是否有该成员，成功返回true</li> <li><code>get</code>返回该成员的值，没有对应成员，返回undefined。</li> <li><code>delete</code>删除该成员，成功返回true</li> <li><code>clear</code>清空所有成员</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'Author'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span>size <span class="token comment">// 2 </span>
map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;张三&quot;</span>
map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Author&quot;</span>
</code></pre></div><h2 id="_3-16-11-proxy"><a href="#_3-16-11-proxy" class="header-anchor">#</a> 3.16.11 proxy</h2> <p>Proxy可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。Proxy这个词的原意是代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”。</p> <p>Proxy接受两个参数：第一个参数是所要代理的目标对象，第二个参数是一个配置对象用于拦截对应的操作,实例如下。</p> <h4 id="get拦截对象属性的读取、set拦截对象属性的设置。"><a href="#get拦截对象属性的读取、set拦截对象属性的设置。" class="header-anchor">#</a> <code>get</code>拦截对象属性的读取、<code>set</code>拦截对象属性的设置。</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'set'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>title  <span class="token comment">//   console.log('get')</span>
obj<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'jaqi'</span>  <span class="token comment">//   console.log('set')</span>
</code></pre></div><h4 id="deleteproperty拦截delete操作"><a href="#deleteproperty拦截delete操作" class="header-anchor">#</a> <code>deleteProperty</code>拦截delete操作</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">deleteProperty</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'deleteProperty'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'jaqi'</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name <span class="token comment">//  console.log('deleteProperty')</span>
</code></pre></div><h4 id="has判断对象是否具有某个属性-拦截hasproperty操作"><a href="#has判断对象是否具有某个属性-拦截hasproperty操作" class="header-anchor">#</a> <code>has</code>判断对象是否具有某个属性，拦截<code>hasProperty</code>操作</h4> <h4 id="construct拦截new命令"><a href="#construct拦截new命令" class="header-anchor">#</a> <code>construct</code>拦截new命令</h4> <h4 id="definepropertyobject-defineproperty-操作"><a href="#definepropertyobject-defineproperty-操作" class="header-anchor">#</a> <code>defineProperty</code>Object.defineProperty()操作</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">defineProperty</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'defineProperty'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 触发 console.log('defineProperty')</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'jaqi'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 是否可以改变</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name <span class="token comment">// jaqi</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'root'</span> <span class="token comment">// writable为true 时 可以修改 root </span>
</code></pre></div><h2 id="_3-16-12-reflect"><a href="#_3-16-12-reflect" class="header-anchor">#</a> 3.16.12 Reflect</h2> <p>将Object对象的一些明显属于语言内部的方法，放到Reflect对象上。</p> <h2 id="_3-16-13-promise"><a href="#_3-16-13-promise" class="header-anchor">#</a> 3.16.13 Promise</h2> <p><code>Promise</code>详见<a href="/jaqi.note/frontend/Javascript/sync&amp;asyn/#_3-14-2promise">3.14.2</a></p> <h2 id="_3-16-14-iterator和for-of循环"><a href="#_3-16-14-iterator和for-of循环" class="header-anchor">#</a> 3.16.14 Iterator和<code>for...of</code>循环</h2> <p>JavaScript原有的表示“集合”的数据结构，主要是数组（Array）和对象（Object），ES6 又添加了Map和Set。为了统一接口机制，来处理不同的数据结构，因此提出了遍历器（Iterator）为各种不同的数据结构提供统一的访问机制。以及新的遍历命令<code>for...of</code></p> <h2 id="_3-16-15-iterator"><a href="#_3-16-15-iterator" class="header-anchor">#</a> 3.16.15 Iterator</h2> <ul><li>Iterator 的遍历过程:</li></ul> <blockquote><ol><li>创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</li> <li>第一次调用指针对象的<code>next</code>方法，可以将指针指向数据结构的第一个成员。</li> <li>第二次调用指针对象的<code>next</code>方法，指针就指向数据结构的第二个成员。</li> <li>不断调用指针对象的<code>next</code>方法，直到它指向数据结构的结束位置。</li></ol></blockquote> <ul><li><code>next</code>方法返回两个对象，当前指向的成员值value和该成员是否被遍历过done</li> <li>原生具备 Iterator 接口的数据结构如下。</li></ul> <blockquote><p>Array<br>
Map<br>
Set
String<br>
TypedArray<br>
函数的 arguments 对象<br>
NodeList 对象</p></blockquote> <h2 id="_3-16-16-for-of"><a href="#_3-16-16-for-of" class="header-anchor">#</a> 3.16.16 <code>for...of</code></h2> <p>一个数据结构只要部署了Symbol.iterator属性，就被视为具有iterator接口，就可以用for...of循环遍历它的成员。</p> <h2 id="_3-16-17-generator"><a href="#_3-16-17-generator" class="header-anchor">#</a> 3.16.17 Generator</h2> <p>Generator函数特征</p> <ol><li>function关键字与函数名之间有一个星号。</li> <li>函数体内部使用yield表达式，定义不同的内部状态，遇到yield会暂停执行。</li> <li><code>next</code>恢复暂停，向下执行。返回value表达式的值，done是否完成遍历。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">helloWorldGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'world'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">'ending'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> hw <span class="token operator">=</span> <span class="token function">helloWorldGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// { value: 'hello', done: false }</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { value: 'world', done: false }</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { value: 'ending', done: true }</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>

</code></pre></div><ul><li>next方法可以带一个参数，该参数就会被当作上一个yield表达式的返回值。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token boolean">true</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> reset <span class="token operator">=</span> <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span> <span class="token punctuation">{</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { value: 0, done: false }</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// { value: 0, done: false }</span>
</code></pre></div><p>如果next方法没有参数，每次运行到yield表达式，变量reset的值总是undefined。当next方法带一个参数true时，变量reset就被重置为这个参数（即true），因此i会等于-1，下一轮循环就会从-1开始递增。</p> <ul><li>throw在函数体外抛出错误，然后在Generator函数体内捕获</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'内部捕获'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  i<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  i<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'外部捕获'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 内部捕获 a</span>
<span class="token comment">// 外部捕获 b</span>
</code></pre></div><ul><li>return返回给定的值，并且终结遍历Generator函数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// { value: 1, done: false }</span>
g<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// { value: &quot;foo&quot;, done: true }</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div><h2 id="_3-16-18-async"><a href="#_3-16-18-async" class="header-anchor">#</a> 3.16.18 async</h2> <p><font color="red">*</font>ES2017新增<code>async</code>，它就是Generator函数的语法糖。</p> <ul><li>相对于Generator的改进：</li></ul> <ol><li>内置执行器：Generator函数的执行必须靠执行器，而async函数自带执行器。也就是说，async函数的执行，与普通函数一模一样，只要一行。</li> <li>更好的语义：async和await，比起星号和yield，语义更清楚了。async表示函数里有异步操作，await表示紧跟在后面的表达式需要等待结果。</li> <li>更广的适用性：yield命令后面只能是Thunk函数或Promise对象，而async函数的await命令后面，可以是Promise对象和原始类型的值（数值、字符串和布尔值，但这时会自动转成立即resolved的Promise对象）。</li> <li>返回值是Promise：async函数的返回值是Promise对象，可以用then方法指定下一步的操作。</li></ol> <p>详见<a href="/jaqi.note/frontend/Javascript/sync&amp;asyn/#_3-14-4async-await">3.14.3</a></p> <h2 id="_3-16-19-class"><a href="#_3-16-19-class" class="header-anchor">#</a> 3.16.19 Class</h2> <p>为了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过class关键字，可以定义类。
ES写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">total</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>description <span class="token operator">=</span> <span class="token string">'求和'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>Description <span class="token comment">// '求和'</span>
p<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3 </span>
</code></pre></div><p>ES6 class写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token comment">// 构造函数</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// prototype方法</span>
  <span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">Description</span> <span class="token operator">:</span> <span class="token string">'求和'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>Description <span class="token comment">// '求和'</span>
p<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3 </span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li>类名不能重复</li> <li>类定义不会被提升，需要在访问前定义</li></ol></div> <p><code>prototype</code>详见<a href="/jaqi.note/frontend/javascript/oop/#_5、prototype模式">3.15.3</a></p> <h2 id="_3-16-20-es6-module"><a href="#_3-16-20-es6-module" class="header-anchor">#</a> 3.16.20 ES6 Module</h2> <p><code>CommonJS</code>、<code>AMD</code>和<code>ES6 Module</code>规范的区别：</p> <table><thead><tr><th>名称</th> <th>使用场景</th> <th>加载方式</th> <th>加载方式</th> <th>模块规范</th></tr></thead> <tbody><tr><td><code>CommonJS</code></td> <td>服务器</td> <td>同步</td> <td>运行时</td> <td>NodeJS</td></tr> <tr><td><code>AMD</code></td> <td>浏览器</td> <td>异步</td> <td>运行时（预先执行）</td> <td>RequireJS</td></tr> <tr><td><code>CMD</code></td> <td>浏览器</td> <td>异步</td> <td>运行时（按需执行）</td> <td>SeaJS</td></tr> <tr><td><code>ES6 Module</code></td> <td>通用</td> <td>异步</td> <td>编译时确认依赖关系，运行时按需动态引用</td> <td>原生JS</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><code>ES6 Module</code>模块输出的是实时的动态数据，是值的引用，而<code>CommonJS</code>输出的是缓存的值，是一个值的拷贝。</li> <li><code>CommonJS</code>加载的是一个对象该对象只有在脚本运行完才会生成。而<code>ES6 Module</code>模块不是对象，它的对外接口只是一种静态定义，在代码静态解析阶段就会生成。</li> <li><code>CommonJS</code>详见<a href="/jaqi.note/other/node/introduction/#_7-1-6-模块系统">7.1.6</a></li></ul></div> <p><code>ES6 Module</code>主要由两个命令构成：<code>export</code>和<code>import</code>。<code>export</code>命令用于规定模块的对外接口，<code>import</code>命令用于输入其他模块提供的功能。</p> <h3 id="export"><a href="#export" class="header-anchor">#</a> <code>export</code></h3> <p>一个模块就是一个独立的文件。该文件内部的所有变量，外部无法获取。如果你希望外部能够读取模块内部的某个变量，就必须使用<code>export</code>关键字输出该变量。<code>export</code>命令可以出现在模块的任何位置，只要处于模块顶层就可以。如果处于块级作用域内，就会报错。</p> <p><code>export</code>命令规定的是对外的接口，必须与模块内部的变量建立一一对应关系。</p> <ul><li><code>export</code>的写法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 报错</span>
<span class="token keyword">export</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// 报错</span>
<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> m<span class="token punctuation">;</span>

<span class="token comment">// 写法一</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// 写法二</span>
<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>m<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 写法三 通过as关键字设置别名</span>
<span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>n <span class="token keyword">as</span> m<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li>输出<code>function</code>和<code>class</code>的写法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 报错</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> f<span class="token punctuation">;</span>

<span class="token comment">// 正确</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 正确</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>f<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>批量输出</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">var</span> firstName <span class="token operator">=</span> <span class="token string">'Michael'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> lastName <span class="token operator">=</span> <span class="token string">'Jackson'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> year <span class="token operator">=</span> <span class="token number">1958</span><span class="token punctuation">;</span>

<span class="token comment">// 另一种写法</span>
<span class="token keyword">var</span> firstName <span class="token operator">=</span> <span class="token string">'Michael'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lastName <span class="token operator">=</span> <span class="token string">'Jackson'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> year <span class="token operator">=</span> <span class="token number">1958</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">,</span> year <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="import"><a href="#import" class="header-anchor">#</a> <code>import</code></h3> <p>使用<code>export</code>命令定义了模块的对外接口以后,就可以通过<code>import</code>命令加载这个模块。<code>import</code>命令是一个只读接口，虽然输出对象时可以修改但不建议。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">,</span> year <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./profile.js'</span><span class="token punctuation">;</span>

<span class="token comment">// 通过as关键字设置别名</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> lastName <span class="token keyword">as</span> surname <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./profile.js'</span><span class="token punctuation">;</span>

<span class="token comment">// 整体加载</span>
<span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">as</span> profile <span class="token keyword">from</span> <span class="token string">'./profile.js'</span><span class="token punctuation">;</span>

<span class="token comment">// 整体加载的使用</span>
profile<span class="token punctuation">.</span>firstName
profile<span class="token punctuation">.</span>lastName
profile<span class="token punctuation">.</span>year

</code></pre></div><p><font color="red">*</font>ES2020提案<code>import</code>支持动态加载模块,返回一个promise 。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span>specifier<span class="token punctuation">)</span> <span class="token comment">//specifier 表示变量</span>
</code></pre></div><p>按需加载:只有用户点击了按钮，才会加载这个模块。</p> <div class="language-js extra-class"><pre class="language-js"><code>button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dialogBox.js'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">dialogBox</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    dialogBox<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">动态引入模块：import和export命令只能在模块的顶层，不能在代码块之中调用</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 错误写法</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token string">'module1'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span> <span class="token string">'module2'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正确写法</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'module1.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">MyModual</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">MyModual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'module2.css'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module2</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    module2<span class="token punctuation">;</span>  <span class="token comment">// 引入css文件的写法</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// CommonJS写法 </span>
<span class="token comment">// 该方法不能引入css文件的写法。</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module1.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module2.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <h3 id="export-default"><a href="#export-default" class="header-anchor">#</a> <code>export default</code></h3> <p>使用import命令的时候，用户需要知道所要加载的变量名或函数名，否则无法加载。为了给用户提供方便，让他们不用阅读文档就能加载模块，就要用到export default命令，为模块指定默认输出。</p> <ul><li>输出匿名函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用默认输出时，变量不需要大括号</span>
<span class="token keyword">import</span> customName <span class="token keyword">from</span> <span class="token string">'./export-default'</span><span class="token punctuation">;</span>
<span class="token function">customName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'foo'</span>
</code></pre></div><ul><li>输出非匿名函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 另一种写法</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> foo<span class="token punctuation">;</span>
<span class="token comment">// 等同于  </span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>foo <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>export default</code>命令的本质是将后面的值，赋给default变量，所以它后面不能跟变量声明语句。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 正确</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// 正确</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> a<span class="token punctuation">;</span>

<span class="token comment">// 错误</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// 正确</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token number">42</span><span class="token punctuation">;</span>

<span class="token comment">// 报错</span>
<span class="token keyword">export</span> <span class="token number">42</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="export与import的复合写法"><a href="#export与import的复合写法" class="header-anchor">#</a> <code>export</code>与<code>import</code>的复合写法</h3> <p>先输入后输出同一个模块。<br>
需要注意的是，写成一行以后，foo和bar实际上并没有被导入当前模块，只是相当于对外转发了这两个接口，导致当前模块不能直接使用foo和bar。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'my_module'</span><span class="token punctuation">;</span>

<span class="token comment">// 可以简单理解为</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'my_module'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="模块的继承"><a href="#模块的继承" class="header-anchor">#</a> 模块的继承</h3> <p>输出circle模块的所有属性和方法,但会忽略circle模块里的默认方法，然后有输出e和默认方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'circle'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token number">2.71828182846</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="跨模块常量"><a href="#跨模块常量" class="header-anchor">#</a> 跨模块常量</h3> <p>const声明的常量只在当前代码块有效。如果想设置跨模块的常量（即跨多个文件），或者说一个值要被多个模块共享，可以采用下面的写法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// constants.js 模块</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token comment">// test1.js 模块</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">'./constants'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token comment">// test2.js 模块</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constants'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><h3 id="module的加载实现"><a href="#module的加载实现" class="header-anchor">#</a> Module的加载实现</h3> <ul><li>传统方法
<code>defer</code>是“渲染完再执行”，<code>async</code>是“下载完就执行”。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;path/to/myModule.js&quot;</span> defer<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;path/to/myModule.js&quot;</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ul><li>ES6加载
要加入<code>type=&quot;module&quot;</code>属性。属于异步加载，等同于<code>defer</code>。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;./foo.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 另一种写法</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">&quot;./foo.js&quot;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_3-16-21-风格规范"><a href="#_3-16-21-风格规范" class="header-anchor">#</a> 3.16.21  风格规范</h2> <ol><li><code>let</code>取代<code>var</code>,常量使用<code>const</code>代替。</li> <li>字符串使用单引号，动态字符串使用反引号。</li> <li>优先使用解构赋值</li> <li>单行定义的对象，最后一个成员不以逗号结尾。多行定义的对象，最后一个成员以逗号结尾。</li> <li>对象尽量静态化，一旦定义不要随便增加新属性，如果增加使用<code>Object.assign</code>方法</li></ol> <blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <ol start="6"><li>对象的key与vaule同名时候，尽量简写。</li> <li>使用<code>...</code>扩展运算符拷贝数组。</li> <li>立即执行的函数可以写成箭头函数的形式。</li> <li>import取代require</li> <li>export取代module.exports</li> <li>如果模块只有一个输出值，就使用export default</li> <li>使用ESLint检查工具</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jaqi.note/frontend/javascript/oop/" class="prev">
        3.15 面向对象编程
      </a></span> <span class="next"><a href="/jaqi.note/frontend/javascript/TypeScript/">
        3.17 TypeScript
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/jaqi.note/assets/js/app.a8f46c6d.js" defer></script><script src="/jaqi.note/assets/js/2.244728d6.js" defer></script><script src="/jaqi.note/assets/js/37.ef428da6.js" defer></script>
  </body>
</html>

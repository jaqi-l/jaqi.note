(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{369:function(t,n,s){"use strict";s.r(n);var e=s(42),a=Object(e.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_5-1请求方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1请求方式"}},[t._v("#")]),t._v(" 5.1请求方式")]),t._v(" "),s("h3",{attrs:{id:"_5-1-1get请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1get请求"}},[t._v("#")]),t._v(" 5.1.1get请求")]),t._v(" "),s("p",[t._v("http://localhost/php-day2/1get.php?userName=123456&psw=123456")]),t._v(" "),s("p",[t._v("http://......?K=V&K=V")]),t._v(" "),s("p",[t._v("get请求的表单，一般用于获取数据。")]),t._v(" "),s("p",[t._v("表单两个重要的属性：")]),t._v(" "),s("p",[t._v("method表示提交方法get/post假如写的是get,将来提交表单的时候会通过URL地址？来传递参数")]),t._v(" "),s("p",[t._v("action处理表单的服务器程序")]),t._v(" "),s("p",[t._v("get请求不足：")]),t._v(" "),s("p",[t._v("1.性能不高")]),t._v(" "),s("p",[t._v("2.数据内容不能太大，一般2000字符")]),t._v(" "),s("p",[t._v("优势：便于分享网址")]),t._v(" "),s("h3",{attrs:{id:"_5-1-2post请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2post请求"}},[t._v("#")]),t._v(" 5.1.2post请求")]),t._v(" "),s("p",[t._v("post请求也可以把数据传输到服务器上，但是不利用URL,利用HTTP request请求报文头")]),t._v(" "),s("p",[t._v("post一般用于修改服务器上的资源")]),t._v(" "),s("p",[t._v("post请求好处：")]),t._v(" "),s("p",[t._v("1.安全 2.内容不限量")]),t._v(" "),s("p",[t._v("缺点：地址不可以分享")]),t._v(" "),s("h2",{attrs:{id:"_5-2ajax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2ajax"}},[t._v("#")]),t._v(" 5.2ajax")]),t._v(" "),s("h3",{attrs:{id:"_5-2-1xhr-open-send"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1xhr-open-send"}},[t._v("#")]),t._v(" 5.2.1xhr/open/send")]),t._v(" "),s("p",[t._v("xhr：")]),t._v(" "),s("p",[t._v("高级浏览器：new XMLHttpRequest()")]),t._v(" "),s("p",[t._v('IE6：new ActiveXObject("Micorsoft.XMLHTTP")')]),t._v(" "),s("p",[t._v("兼容：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("XMLHttpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\nxhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\nxhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActiveXObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.XMLHTTP"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置代理")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ("请求类型",请求路径",是否异步)')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送请求")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("里面的参数是http requset报文头携带的内容\n")])])]),s("p",[t._v("常见异步:setInterval() setTimeout() 所有的事件监听")]),t._v(" "),s("p",[t._v("避免中文乱码：encodeURIComponent()")]),t._v(" "),s("p",[t._v("responseText:接收到的数据")]),t._v(" "),s("p",[t._v("onreadystatechange属性：")]),t._v(" "),s("p",[t._v("0→ open()没有被调用")]),t._v(" "),s("p",[t._v("1→open()被调用")]),t._v(" "),s("p",[t._v("2→头部被服务器接收到")]),t._v(" "),s("p",[t._v("3→开始接收服务器返回的数据")]),t._v(" "),s("p",[t._v("4→完成")]),t._v(" "),s("p",[t._v("if (xhr.readyState == 4) {}")]),t._v(" "),s("p",[t._v("http状态码：")]),t._v(" "),s("p",[t._v("200 ok→ 成功")]),t._v(" "),s("p",[t._v("304 notmodified→已缓存")]),t._v(" "),s("p",[t._v("404 notfound→未找到文件")]),t._v(" "),s("p",[t._v("if(xhr.status>=200 &&xhr.status<300 || xhr.status ==304 ){")]),t._v(" "),s("p",[t._v("content.innerHTML = xhr.responseText;")]),t._v(" "),s("p",[t._v("}else{")]),t._v(" "),s("p",[t._v('content.innerHTML = "服务器内部错误，稍后再试";')]),t._v(" "),s("p",[t._v("}")]),t._v(" "),s("h3",{attrs:{id:"_5-2-2ajax原生写法案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2ajax原生写法案例"}},[t._v("#")]),t._v(" 5.2.2ajax原生写法案例")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<h1 id="content">.........</h1>\n\n<button id="btn">点我读取文件</button>\n\n<script>\n\n// 绑定相关元素\n\n         var btn = document.getElementById("btn");\n\n         var content = document.getElementById("content");\n\n  // 事件监听\n\nbtn.onclick = function(){\n\n// 1 创建一个xhr对象\n\nif (window.XMLHttpRequest) {\n\nxhr = new XMLHttpRequest();\n\n}else{\n\nxhr = new ActiveXObject("Microsoft.XMLHTTP");}\n\n// 2 指定接受回来的内容 就绪状态改变时候触发\n\nxhr.onreadystatechange = function(){\n\nif (xhr.readyState == 4) {\n\nif(xhr.status>=200 &&xhr.status<300 || xhr.status ==304 ){\n\ncontent.innerHTML = xhr.responseText;\n\n}else{\n\ncontent.innerHTML = "服务器内部错误，稍后再试";\n\n}\n\n}\n\n}\n')])])]),s("p",[t._v("GET方法配置请求信息：")]),t._v(" "),s("p",[t._v('// 3第一个参数请求类型 get/post，第二个参数请求路径（带参数的写法"php/do2.php?yhm="+yhm），第三个参数是否使用异步。')]),t._v(" "),s("p",[t._v('xhr.open("get","php/1.txt",true);')]),t._v(" "),s("p",[t._v("// 4 发送请求，get写null")]),t._v(" "),s("p",[t._v("xhr.send(null);")]),t._v(" "),s("p",[t._v("}")]),t._v(" "),s("p",[t._v("POST方法配置请求信息：")]),t._v(" "),s("p",[t._v("// 3第一个参数请求类型 get/post，第二个参数请求路径，第三个参数是否使用异步。")]),t._v(" "),s("p",[t._v('xhr.open("post","php/do2.php",true);')]),t._v(" "),s("p",[t._v("// 4设置请求头信息，post必须写这段")]),t._v(" "),s("p",[t._v('xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");')]),t._v(" "),s("p",[t._v('// 5发送请求(带参数写法"k=v&k=v")')]),t._v(" "),s("p",[t._v('xhr.send("xingming=along&age=30");')]),t._v(" "),s("p",[t._v("}")]),t._v(" "),s("h3",{attrs:{id:"_5-2-3缓存问题及其解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-3缓存问题及其解决方案"}},[t._v("#")]),t._v(" 5.2.3缓存问题及其解决方案")]),t._v(" "),s("p",[t._v("两次get、post请求同一个url携带的参数也一样，即使服务器返回状态码是200 也会被当做304那也缓存，这样会导致后台文件修改，前台内容没有变化")]),t._v(" "),s("p",[t._v('1.加随机数："php/do2.php?x="+Math.random()')]),t._v(" "),s("p",[t._v("2.时间挫：Date.parse(new.Date());")]),t._v(" "),s("p",[t._v("5.3跨域\n一个域名的组成：")]),t._v(" "),s("p",[t._v("http://www.abc.com:8080/script/jquert.js")]),t._v(" "),s("p",[t._v("协议+子域名+主域名+端口号+请求资源地址")]),t._v(" "),s("p",[t._v("Js出于安全的考虑，不允许跨域调用的")]),t._v(" "),s("p",[t._v("当协议、子域名、主域名、端口号中任意一个不同时，都算作跨域，")]),t._v(" "),s("p",[t._v("解决方案：")]),t._v(" "),s("p",[t._v("1.后台服务器代理")]),t._v(" "),s("p",[t._v("2.JSNOP(仅支持get请求)")]),t._v(" "),s("p",[t._v("A页面：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<script>\n\nFunction jsonp(json){\n\nAlert(json[\"name\"];\n\n}\n\n<\/script>\n\n<script src= \"http://www.bbb.com/jsonp.js \"><\/script>\n\nB页面：\n\njsonp({'name': 'jaqi','age':24});\n\n3. xhr（XMLHttpRequest），php后端设置\n\nHTML5中的xhr已经支持跨域请求，但是IE10一下不支持。\n\n兼容方案：\n\nheader('Access-Control-Allow-Methods:POST,GET');\n\nheader('Access-Control-Allow-Credentials:true');\n")])])])])}),[],!1,null,null,null);n.default=a.exports}}]);